"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[232],{62879:(e,t,n)=>{n.d(t,{Y:()=>i});var r=n(63441);let i={convert(e,t={urlSafe:!1,skipPadding:!1}){let n="string"==typeof e?e:Array.from(e,e=>String.fromCodePoint(e)).join(""),i=(0,r.xA)()(n);return t.urlSafe&&(i=i.replace(/\+/g,"-").replace(/\//g,"_")),t.skipPadding&&(i=i.replace(/=/g,"")),i}}},98232:(e,t,n)=>{n.d(t,{D:()=>rh});var r,i,o,s,a,c,l,u,p,d,h=n(69414);function f(e){return"function"==typeof e}function y(e){return function(t){if(f(null==t?void 0:t.lift))return t.lift(function(t){try{return e(t,this)}catch(e){this.error(e)}});throw TypeError("Unable to lift unknown Observable type")}}Symbol();var m=n(39249),v=function(e){var t=e(function(e){Error.call(e),e.stack=Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}(function(e){return function(t){e(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map(function(e,t){return t+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t}});function b(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var E=function(){var e;function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e,t,n,r,i,o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var s=(0,m.Ju)(o),a=s.next();!a.done;a=s.next())a.value.remove(this)}catch(t){e={error:t}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(f(c))try{c()}catch(e){i=e instanceof v?e.errors:[e]}var l=this._finalizers;if(l){this._finalizers=null;try{for(var u=(0,m.Ju)(l),p=u.next();!p.done;p=u.next()){var d=p.value;try{T(d)}catch(e){i=null!=i?i:[],e instanceof v?i=(0,m.fX)((0,m.fX)([],(0,m.zs)(i)),(0,m.zs)(e.errors)):i.push(e)}}}catch(e){n={error:e}}finally{try{p&&!p.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}if(i)throw new v(i)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)T(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!=(n=this._finalizers)?n:[]).push(e)}},t.prototype._hasParent=function(e){var t=this._parentage;return t===e||Array.isArray(t)&&t.includes(e)},t.prototype._addParent=function(e){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e},t.prototype._removeParent=function(e){var t=this._parentage;t===e?this._parentage=null:Array.isArray(t)&&b(t,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&b(n,e),e instanceof t&&e._removeParent(this)},(e=new t).closed=!0,t.EMPTY=e,t}();function g(e){return e instanceof E||e&&"closed"in e&&f(e.remove)&&f(e.add)&&f(e.unsubscribe)}function T(e){f(e)?e():e.unsubscribe()}E.EMPTY;var S={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},N={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=N.delegate;return(null==i?void 0:i.setTimeout)?i.setTimeout.apply(i,(0,m.fX)([e,t],(0,m.zs)(n))):setTimeout.apply(void 0,(0,m.fX)([e,t],(0,m.zs)(n)))},clearTimeout:function(e){var t=N.delegate;return((null==t?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function O(e){N.setTimeout(function(){var t=S.onUnhandledError;if(t)t(e);else throw e})}function A(){}var _=I("C",void 0,void 0);function I(e,t,n){return{kind:e,value:t,error:n}}var k=null,w=function(e){function t(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,g(t)&&t.add(n)):n.destination=M,n}return(0,m.C6)(t,e),t.create=function(e,t,n){return new R(e,t,n)},t.prototype.next=function(e){this.isStopped?P(I("N",e,void 0),this):this._next(e)},t.prototype.error=function(e){this.isStopped?P(I("E",void 0,e),this):(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped?P(_,this):(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(E),C=Function.prototype.bind;function D(e,t){return C.call(e,t)}var x=function(){function e(e){this.partialObserver=e}return e.prototype.next=function(e){var t=this.partialObserver;if(t.next)try{t.next(e)}catch(e){L(e)}},e.prototype.error=function(e){var t=this.partialObserver;if(t.error)try{t.error(e)}catch(e){L(e)}else L(e)},e.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(e){L(e)}},e}(),R=function(e){function t(t,n,r){var i,o,s=e.call(this)||this;return f(t)||!t?i={next:null!=t?t:void 0,error:null!=n?n:void 0,complete:null!=r?r:void 0}:s&&S.useDeprecatedNextContext?((o=Object.create(t)).unsubscribe=function(){return s.unsubscribe()},i={next:t.next&&D(t.next,o),error:t.error&&D(t.error,o),complete:t.complete&&D(t.complete,o)}):i=t,s.destination=new x(i),s}return(0,m.C6)(t,e),t}(w);function L(e){if(S.useDeprecatedSynchronousErrorHandling)S.useDeprecatedSynchronousErrorHandling&&k&&(k.errorThrown=!0,k.error=e);else O(e)}function P(e,t){var n=S.onStoppedNotification;n&&N.setTimeout(function(){return n(e,t)})}var M={closed:!0,next:A,error:function(e){throw e},complete:A};function F(e,t,n,r,i){return new j(e,t,n,r,i)}var j=function(e){function t(t,n,r,i,o,s){var a=e.call(this,t)||this;return a.onFinalize=o,a.shouldUnsubscribe=s,a._next=n?function(e){try{n(e)}catch(e){t.error(e)}}:e.prototype._next,a._error=i?function(e){try{i(e)}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=r?function(){try{r()}catch(e){t.error(e)}finally{this.unsubscribe()}}:e.prototype._complete,a}return(0,m.C6)(t,e),t.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),n||null==(t=this.onFinalize)||t.call(this)}},t}(w);function U(e,t){return y(function(n,r){var i=0;n.subscribe(F(r,function(n){r.next(e.call(t,n,i++))}))})}function $(e){let t=new Set;for(let r of e.attributes||[]){var n;if(n=r,n?.type==="auth"&&"object"==typeof n?.properties&&Array.isArray(n?.properties?.rules)&&(n?.properties?.rules).every(e=>!!e.allow))for(let e of r.properties.rules)"owner"===e.allow?t.add(e.ownerField||"owner"):"groups"===e.allow&&void 0!==e.groupsField&&t.add(e.groupsField)}return Array.from(t)}function K(e){return`${e[0].toUpperCase()}${e.slice(1)}`}function B(e){let t,n,r=new Promise((e,r)=>{t=e,n=r});return e(r).then(e=>{t(e)}).catch(e=>{n(e)}),r}let V=new WeakMap;function G(e,t){return V.set(t,e),e.finally(()=>{V.delete(t)})}let q={HAS_ONE:"HAS_ONE",HAS_MANY:"HAS_MANY",BELONGS_TO:"BELONGS_TO"},Y={ID:"ID",String:"String",AWSDate:"String",AWSTime:"String",AWSDateTime:"String",AWSTimestamp:"Int",AWSEmail:"String",AWSPhone:"String",AWSURL:"String",AWSIPAddress:"String",AWSJSON:"String",Boolean:"Boolean",Int:"Int",Float:"Float"},Q=e=>1===e.length?e[0]:e.reduce((e,t,n)=>0===n?t:e+K(t),""),W=(e,t,n)=>{if(!n)return null;let r={};for(let[i,o]of Object.entries(n)){let n=t?e.models[t]?.fields[i]:void 0,s={fieldDef:n,value:o};!function(e){return"object"==typeof e.fieldDef?.type&&"model"in e.fieldDef.type&&"string"==typeof e.fieldDef.type.model&&e.fieldDef.isArray&&Array.isArray(e.value?.items)}(s)?function(e){return"object"==typeof e?.type&&"model"in e.type&&"string"==typeof e.type.model}(n)?r[i]=W(e,n.type.model,o):r[i]=o:r[i]=s.value.items.map(t=>W(e,s.fieldDef.type.model,t))}return r};function J(e,t,n,r,i,o,s=!1){let a=r.models[t],c=a.fields,l=Object.entries(c).filter(([e,t])=>t?.type?.model!==void 0).map(([e])=>e);return n.map(t=>{if(null==t)return t;let n={};for(let u of l){let l=c[u],p=(l?.type).model,d=r.models[p],h=d.primaryKeyInfo.primaryKeyFieldName,f=d.primaryKeyInfo.sortKeyFieldNames,y=l.association?.connectionType,m=[];l.association&&"associatedWith"in l.association&&(m=l.association.associatedWith);let v=[];switch(l.association&&"targetNames"in l.association&&v.push(...l.association.targetNames),y){case q.BELONGS_TO:{let r=f.reduce((e,n)=>(t[n]&&(e[n]=t[n]),e),{});if(e.models[p]?.get===void 0)break;s?n[u]=(n,s)=>t[v[0]]?e.models[p].get(n,{[h]:t[v[0]],...r},{authMode:s?.authMode||i,authToken:s?.authToken||o}):{data:null}:n[u]=n=>t[v[0]]?e.models[p].get({[h]:t[v[0]],...r},{authMode:n?.authMode||i,authToken:n?.authToken||o}):{data:null};break}case q.HAS_ONE:case q.HAS_MANY:{let r=y===q.HAS_ONE?e=>({data:e?.data.shift()||null,errors:e.errors,extensions:e.extensions}):e=>e,c=a.primaryKeyInfo.primaryKeyFieldName,l=a.primaryKeyInfo.sortKeyFieldNames,h=d.fields[m[0]];if(h.type.model){let a=[];h.association&&"targetNames"in h.association&&(a=h.association?.targetNames);let d=a.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[l[n-1]]}});if(e.models[p]?.list===void 0)break;s?n[u]=(n,s)=>t[c]?B(async t=>{let a=G(e.models[p].list(n,{filter:{and:d},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[u]=n=>t[c]?B(async t=>{let s=G(e.models[p].list({filter:{and:d},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[];break}let f=m.map((e,n)=>0===n?{[e]:{eq:t[c]}}:{[e]:{eq:t[l[n-1]]}});if(e.models[p]?.list===void 0)break;s?n[u]=(n,s)=>t[c]?B(async t=>{let a=G(e.models[p].list(n,{filter:{and:f},limit:s?.limit,nextToken:s?.nextToken,authMode:s?.authMode||i,authToken:s?.authToken||o}),t);return r(await a)}):[]:n[u]=n=>t[c]?B(async t=>{let s=G(e.models[p].list({filter:{and:f},limit:n?.limit,nextToken:n?.nextToken,authMode:n?.authMode||i,authToken:n?.authToken||o}),t);return r(await s)}):[]}}}return{...t,...n}})}let z={CREATE:{operationPrefix:"create",usePlural:!1},GET:{operationPrefix:"get",usePlural:!1},UPDATE:{operationPrefix:"update",usePlural:!1},DELETE:{operationPrefix:"delete",usePlural:!1},LIST:{operationPrefix:"list",usePlural:!0},INDEX_QUERY:{operationPrefix:"",usePlural:!1},ONCREATE:{operationPrefix:"onCreate",usePlural:!1},ONUPDATE:{operationPrefix:"onUpdate",usePlural:!1},ONDELETE:{operationPrefix:"onDelete",usePlural:!1},OBSERVEQUERY:{operationPrefix:"observeQuery",usePlural:!1}},H=(e,t)=>{let{fields:n}=e;return Object.fromEntries(Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum?[n,X]:"string"==typeof e.nonModel?[n,H(t.nonModels[e.nonModel],t)]:"string"==typeof e?[n,X]:void 0).filter(e=>void 0!==e))},X="";function Z(e){let t=[];return Object.entries(e).forEach(([e,n])=>{n===X?t.push(e):"object"==typeof n&&null!==n&&(n?.items?t.push(e,"{","items","{",Z(n.items),"}","}"):t.push(e,"{",Z(n),"}"))}),t.join(" ")}function ee(e,t,n){let r=e.models[t];return Z(function(e,t,n){let r=(t,n)=>{let[i,...o]=t.split("."),s=o[0],a=e.models[n]??e.nonModels[n],c=a?.fields,l=c?.[i]?.type?.model,u=e.models[l],p=c?.[i]?.type?.nonModel,d=e.nonModels[p],h=u?"model":d?"nonModel":"field";if("nonModel"===h){if(!s)throw Error(`${i} must declare a wildcard (*) or a field of custom type ${p}`);return"*"===s?{[i]:H(d,e)}:{[i]:r(o.join("."),p)}}if("model"===h){let t={};if(!s)throw Error(`${i} must declare a wildcard (*) or a field of model ${l}`);return t="*"===s?{[i]:((e,t)=>{let{fields:n}=e,r=Object.values(n).map(({type:e,name:n})=>"string"==typeof e.enum||"string"==typeof e?[n,X]:"string"==typeof e.nonModel?[n,H(t.nonModels[e.nonModel],t)]:void 0).filter(e=>void 0!==e),i=$(e).map(e=>[e,X]);return Object.fromEntries(r.concat(i))})(e.models[l],e)}:{[i]:r(o.join("."),l)},c[i]?.isArray&&(t={[i]:{items:t[i]}}),t}{let t=c?.[i],r=e.nonModels[n],o=r?.fields?.[i];if(r){if(!o)throw Error(`${i} is not a field of custom type ${n}`)}else{let e=$(a).includes(i);if(!t&&!e)throw Error(`${i} is not a field of model ${n}`)}return{[i]:X}}};return n.reduce((e,n)=>(function e(t,n){let r=e=>e&&"object"==typeof e;for(let i in t)Object.prototype.hasOwnProperty.call(t,i)&&(Object.prototype.hasOwnProperty.call(n,i)&&r(n[i])?e(t[i],n[i]):n[i]=t[i]);return n})(r(n,t),e),{})}(e,t,n??function(e){let{fields:t}=e,n=Object.values(t).map(({type:e,name:t})=>{if("string"==typeof e)return t;if("object"==typeof e){if("string"==typeof e?.enum)return t;else if("string"==typeof e?.nonModel)return`${t}.*`}}).filter(Boolean),r=$(e);return Array.from(new Set(n.concat(r)))}(r)))}function et(e,t,n,r,i){let o,s,a,c,l,{name:u,pluralName:p,fields:d,primaryKeyInfo:{isCustomPrimaryKey:h,primaryKeyFieldName:f,sortKeyFieldNames:y},attributes:m}=t,v=u.charAt(0).toUpperCase()+u.slice(1),b=p.charAt(0).toUpperCase()+p.slice(1),{operationPrefix:E,usePlural:g}=z[n],{selectionSet:T}=r||{};if(E)o=`${E}${g?b:v}`;else if(i){let{queryField:e,pk:t,sk:n=[]}=i;o=e;let r={};if(1===n.length){let[e]=n,t=Y["string"==typeof d[e].type?d[e].type:"String"];r={[e]:`Model${t}KeyConditionInput`}}else if(n.length>1){let t=Q(n),i=m?.find(t=>t?.properties?.queryField===e)?.properties?.name;r={[t]:`Model${K(u)}${K(i)}CompositeKeyConditionInput`}}s={[t]:`${Object.prototype.hasOwnProperty.call(d[t].type,"enum")?d[t].type.enum:d[t].type}!`,...r}}else throw Error("Error generating GraphQL Document - invalid operation name");let S=ee(e,u,T),N={[f]:`${d[f].type}!`},O={},A=e=>{if(0===y.length)return{};if("get"===e)return y.reduce((t,n)=>{let r=d[n].type;return"get"===e&&(t[n]=`${r}!`),t},{});if(1!==y.length)return{[Q(y)]:`Model${K(u)}PrimaryCompositeKeyConditionInput`};{let[e]=y,t=Y["string"==typeof d[e].type?d[e].type:"String"];return{[e]:`Model${t}KeyConditionInput`}}};switch(h&&(Object.assign(N,A("get")),Object.assign(O,{[f]:`${d[f].type}`,sortDirection:"ModelSortDirection"},A("list"))),n){case"CREATE":case"UPDATE":case"DELETE":l??(l={input:`${E.charAt(0).toLocaleUpperCase()+E.slice(1)}${v}Input!`}),a??(a="mutation");case"GET":l??(l=N),c??(c=S);case"LIST":l??(l={...O,filter:`Model${v}FilterInput`,limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${S} } nextToken __typename`);case"INDEX_QUERY":l??(l={...s,filter:`Model${v}FilterInput`,sortDirection:"ModelSortDirection",limit:"Int",nextToken:"String"}),a??(a="query"),c??(c=`items { ${S} } nextToken __typename`);case"ONCREATE":case"ONUPDATE":case"ONDELETE":l??(l={filter:`ModelSubscription${v}FilterInput`}),a??(a="subscription"),c??(c=S);break;default:throw Error("Internal error: Attempted to generate graphql document for observeQuery. Please report this error.")}return`${a}${l?`(${Object.entries(l).map(([e,t])=>`$${e}: ${t}`)})`:""} { ${o}${l?`(${Object.keys(l).map(e=>`${e}: $${e}`)})`:""} { ${c} } }`}function en(e,t,n,r,i){let{fields:o,primaryKeyInfo:{isCustomPrimaryKey:s,primaryKeyFieldName:a,sortKeyFieldNames:c}}=e,l=c?.length&&Q(c),u={};switch(t){case"CREATE":u={input:n?er(n,e,r):{}};break;case"UPDATE":u={input:n?Object.fromEntries(Object.entries(er(n,e,r)).filter(([t])=>o[t]?!o[t].isReadOnly:!$(e).includes(t))):{}};break;case"GET":case"DELETE":n&&(u=s?[a,...c].reduce((e,t)=>(e[t]=n[t],e),{}):{[a]:n[a]}),"DELETE"===t&&(u={input:u});break;case"LIST":n?.filter&&(u.filter=n.filter),n?.sortDirection&&(u.sortDirection=n.sortDirection),n&&n[a]&&(u[a]=n[a]),l&&n&&n[l]&&(u[l]=n[l]),n?.nextToken&&(u.nextToken=n.nextToken),n?.limit&&(u.limit=n.limit);break;case"INDEX_QUERY":{let{pk:e,sk:t=[]}=i,r=t?.length&&Q(t);u[e]=n[e],r&&n&&n[r]&&(u[r]=n[r]),n?.filter&&(u.filter=n.filter),n?.sortDirection&&(u.sortDirection=n.sortDirection),n?.nextToken&&(u.nextToken=n.nextToken),n?.limit&&(u.limit=n.limit);break}case"ONCREATE":case"ONUPDATE":case"ONDELETE":n?.filter&&(u={filter:n.filter});break;case"OBSERVEQUERY":throw Error("Internal error: Attempted to build variables for observeQuery. Please report this error.");default:throw Error(`Unhandled operation case: ${t}`)}return u}function er(e,t,n){let{fields:r}=t,i={};return Object.entries(e).forEach(([e,t])=>{let o=r[e]?.type,s=o?.model;if(s){let o=r[e]?.association,a=n.models[s].primaryKeyInfo;o?.connectionType===q.HAS_ONE&&o.targetNames.forEach((e,n)=>{let r=o.associatedWith[n];i[e]=t[r]}),o?.connectionType===q.BELONGS_TO&&o.targetNames.forEach((e,n)=>{if(0===n){let n=a.primaryKeyFieldName;i[e]=t[n]}else{let r=a.sortKeyFieldNames[n-1];i[e]=t[r]}})}else i[e]=t}),i}function ei(e,t,n={}){let r=t(e);return{authMode:n.authMode||r.authMode,authToken:n.authToken||r.authToken}}function eo(e,t,n){let r=t(e).headers||{};return n&&(r=n),r}function es(e){if(e?.errors)return{...e,data:[]};throw e}function ea(e){if(e.errors)return{...e,data:null};throw e}let ec=Symbol("INTERNAL_USER_AGENT_OVERRIDE");!function(e){e.CreateConversation="1",e.GetConversation="2",e.ListConversations="3",e.DeleteConversation="4",e.SendMessage="5",e.ListMessages="6",e.OnStreamEvent="7",e.Generation="8",e.UpdateConversation="9"}(r||(r={}));let el=e=>({category:"ai",action:e});function eu(e){return e?{[ec]:e}:void 0}function ep(e,t,n,r,i,o,s){let a=void 0!==r.arguments;return(...c)=>{var l,u,p,d,h,f,y,m,v;let b,E,g=c[c.length-1];if(i){let e;if(e=c[0],"symbol"==typeof e?.token?.value)b=c[0];else throw Error(`Invalid first argument passed to ${r.name}. Expected contextSpec`)}return(a&&(E=i?c[1]:c[0]),"subscription"===n)?function(e,t,n,r,i,o,s){let{name:a}=n,c=ei(e,r,o),l=eo(e,r,o?.headers),u=eh(n),p=ef(n),d=ey(t,n),h=ed(n.type,"model")?n.type.model:void 0,f=`
    ${"subscription".toLocaleLowerCase()}${u} {
      ${a}${p} ${d}
    }
  `,y=em(n,i),m=eu(s);return e.graphql({...c,query:f,variables:y,...m},l).pipe(U(n=>{let[r]=Object.keys(n.data),i=n.data[r],[o]=h?J(e,h,[i],t,c.authMode,c.authToken):[i];return o}))}(e,t,r,o,E,g,s):(l=e,u=t,p=n,d=r,h=o,f=E,y=g,m=b,v=s,B(async e=>{let{name:t}=d,n=ei(l,h,y),r=eo(l,h,y?.headers),i=eh(d),o=ef(d),s=ey(u,d),a=ed(d.type,"model")?d.type.model:void 0,c=`
    ${p.toLocaleLowerCase()}${i} {
      ${t}${o} ${s}
    }
  `,b=em(d,f),E=eu(v);try{let t=m?l.graphql(m,{...n,query:c,variables:b},r):l.graphql({...n,query:c,variables:b,...E},r),i=G(t,e),{data:o,extensions:s}=await i;if(!o)return{data:null,extensions:s};{let[e]=Object.keys(o),t=Array.isArray(o[e]),r=t?o[e].filter(e=>e):o[e],i=a?J(l,a,t?r:[r],u,n.authMode,n.authToken,!!m):r;return{data:!t&&Array.isArray(i)?i.shift():i,extensions:s}}}catch(r){let{data:e,errors:t}=r;if(!e||0===Object.keys(e).length||!t)return ea(r);{let[i]=Object.keys(e),o=Array.isArray(e[i]),s=o?e[i].filter(e=>e):e[i];if(!s)return ea(r);{let e=a?J(l,a,o?s:[s],u,n.authMode,n.authToken,!!m):s;return{data:!o&&Array.isArray(e)?e.shift():e,errors:t}}}}}))}}function ed(e,t){return"string"==typeof e[t]}function eh(e){if(void 0===e.arguments)return"";let t=Object.entries(e.arguments).map(([e,t])=>{let n=function({type:e,isRequired:t}){let n=t?"!":"";return e instanceof Object&&"enum"in e?`${e.enum}${n}`:e instanceof Object&&"input"in e?`${e.input}${n}`:`${e}${n}`}(t),r=t.isArray?`[${n}]${t.isArrayNullable?"":"!"}`:n;return`$${e}: ${r}`}).join(", ");return t.length>0?`(${t})`:""}function ef(e){if(void 0===e.arguments)return"";let t=Object.keys(e.arguments).map(e=>`${e}: $${e}`).join(", ");return t.length>0?`(${t})`:""}function ey(e,t){if(ed(t,"type")||ed(t.type,"enum"))return"";if(ed(t.type,"nonModel")){let n=e.nonModels[t.type.nonModel];return`{${Z(H(n,e))}}`}return ed(t.type,"model")?`{${ee(e,t.type.model)}}`:""}function em(e,t={}){let n={};if(void 0===e.arguments)return n;for(let r of Object.values(e.arguments))if(void 0!==t[r.name])n[r.name]=t[r.name];else if(r.isRequired)throw Error(`${e.name} requires arguments '${r.name}'`);return n}let ev={queries:"query",mutations:"mutation",subscriptions:"subscription"};function eb(e,t,n,r){if(!t)return{};let i=t.modelIntrospection;if(!i)return{};let o=i[n];if(!o)return{};let s={},a=null===r(e).amplify;for(let t of Object.values(o))s[t.name]=ep(e,i,ev[n],t,a,r);return s}function eE(e,t,n,r,i,o=!1,s){return o?(o,a,c)=>eg(e,t,n,a,c,r,i,o,s):(o,a)=>eg(e,t,n,o,a,r,i,void 0,s)}function eg(e,t,n,r,i,o,s,a,c){return B(async l=>{let{name:u}=n,p=et(t,n,o,i),d=en(n,o,r,t),h=ei(e,s,i),f=eo(e,s,i?.headers),y=eu(c);try{let n=a?e.graphql(a,{...h,query:p,variables:d},f):e.graphql({...h,query:p,variables:d,...y},f),r=G(n,l),{data:o,extensions:s}=await r;if(!o)return{data:null,extensions:s};{let[n]=Object.keys(o),r=W(t,u,o[n]);if(null===r)return{data:null,extensions:s};{if(i?.selectionSet)return{data:r,extensions:s};let[n]=J(e,u,[r],t,h.authMode,h.authToken,!!a);return{data:n,extensions:s}}}}catch(o){let{data:n,errors:r}=o;if(!n||0===Object.keys(n).length||!r)return ea(o);{let[s]=Object.keys(n),c=W(t,u,n[s]);if(!c)return ea(o);if(i?.selectionSet)return{data:c,errors:r};{let[n]=J(e,u,[c],t,h.authMode,h.authToken,!!a);return{data:n,errors:r}}}}})}function eT(e,t,n,r,i=!1,o){return i?(i,s)=>eS(e,t,n,r,s,i,o):i=>eS(e,t,n,r,i,void 0,o)}function eS(e,t,n,r,i,o,s){return B(async a=>{let{name:c}=n,l=et(t,n,"LIST",i),u=en(n,"LIST",i,t),p=ei(e,r,i),d=eo(e,r,i?.headers),h=eu(s);try{let n=o?e.graphql(o,{...p,query:l,variables:u},d):e.graphql({...p,query:l,variables:u,...h},d),r=G(n,a),{data:s,extensions:f}=await r;if(void 0!==s){let[n]=Object.keys(s);if(s[n].items){let r=s[n].items.map(e=>W(t,c,e));if(i?.selectionSet)return{data:r,nextToken:s[n].nextToken,extensions:f};return{data:J(e,c,r,t,p.authMode,p.authToken,!!o),nextToken:s[n].nextToken,extensions:f}}return{data:s[n],nextToken:s[n].nextToken,extensions:f}}}catch(s){let{data:n,errors:r}=s;if(null==n||0===Object.keys(n).length||!r)return es(s);{let[a]=Object.keys(n);if(!n[a]?.items)return es(s);{let s=n[a].items.map(e=>W(t,c,e));if(s)if(i?.selectionSet)return{data:s,nextToken:n[a]?.nextToken,errors:r};else return{data:J(e,c,s,t,p.authMode,p.authToken,!!o),nextToken:n[a]?.nextToken,errors:r};return{data:n[a],nextToken:n[a]?.nextToken,errors:r}}}}})}let eN={},eO=Array(64);for(let e=0;e+65<=90;e++){let t=String.fromCharCode(e+65);eN[t]=e,eO[e]=t}for(let e=0;e+97<=122;e++){let t=String.fromCharCode(e+97),n=e+26;eN[t]=n,eO[n]=t}for(let e=0;e<10;e++){eN[e.toString(10)]=e+52;let t=e.toString(10),n=e+52;eN[t]=n,eO[n]=t}eN["+"]=62,eO[62]="+",eN["/"]=63,eO[63]="/";let eA=e=>{let t=e.length/4*3;"=="===e.slice(-2)?t-=2:"="===e.slice(-1)&&t--;let n=new ArrayBuffer(t),r=new DataView(n);for(let t=0;t<e.length;t+=4){let n=0,i=0;for(let r=t,o=t+3;r<=o;r++)if("="!==e[r]){if(!(e[r]in eN))throw TypeError(`Invalid character ${e[r]} in base64 string.`);n|=eN[e[r]]<<(o-r)*6,i+=6}else n>>=6;let o=t/4*3;n>>=i%8;let s=Math.floor(i/8);for(let e=0;e<s;e++){let t=(s-e-1)*8;r.setUint8(o+e,(n&255<<t)>>t)}}return new Uint8Array(n)};function e_(e){let t;if("string"==typeof e)t=new TextEncoder().encode(e);else t=e;let n="object"==typeof t&&"number"==typeof t.length,r="object"==typeof t&&"number"==typeof t.byteOffset&&"number"==typeof t.byteLength;if(!n&&!r)throw Error("@smithy/util-base64: toBase64 encoder function only accepts string | Uint8Array.");let i="";for(let e=0;e<t.length;e+=3){let n=0,r=0;for(let i=e,o=Math.min(e+3,t.length);i<o;i++)n|=t[i]<<(o-i-1)*8,r+=8;let o=Math.ceil(r/6);n<<=6*o-r;for(let e=1;e<=o;e++){let t=(o-e)*6;i+=eO[(n&63<<t)>>t]}i+="==".slice(0,4-o)}return i}let eI=({image:e})=>({image:{...e,source:{...e.source,bytes:eA(e.source.bytes)}}}),ek=e=>Object.fromEntries(Object.entries(e).filter(([e,t])=>null!==t)),ew=({content:e,createdAt:t,id:n,conversationId:r,role:i})=>({content:(e??[]).map(e=>e.image?eI(e):e.document?(({document:e})=>({document:{...e,source:{...e.source,bytes:eA(e.source.bytes)}}}))(e):e.toolUse?(({toolUse:e})=>({toolUse:{...e,input:JSON.parse(e.input)}}))(e):e.toolResult?(({toolResult:e})=>({toolResult:{toolUseId:e.toolUseId,content:e.content.map(e=>e.image?eI(e):e.json?(({json:e})=>({json:JSON.parse(e)}))(e):ek(e))}}))(e):ek(e)),conversationId:r,createdAt:t,id:n,role:i}),eC=({image:e})=>({image:{...e,source:{...e.source,bytes:e_(e.source.bytes)}}}),eD=(e,t,n,i,o,s,a,c,l,u)=>{if(!n)throw Error(`An error occurred converting a ${s} conversation: Missing ID`);return{id:n,createdAt:i,updatedAt:o,metadata:l,name:u,onStreamEvent:((e,t,n,i,o)=>s=>{let{conversations:a}=t;return a?ep(e,t,"subscription",a[i].message.subscribe,!1,o,el(r.OnStreamEvent))({conversationId:n}).subscribe(e=>{let{next:t,error:n}=(({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,contentBlockText:s,contentBlockToolUse:a,stopReason:c,errors:l})=>l?{error:{id:e,conversationId:t,associatedUserMessageId:n,errors:l}}:{next:Object.fromEntries(Object.entries({id:e,conversationId:t,associatedUserMessageId:n,contentBlockIndex:r,contentBlockDoneAtIndex:i,contentBlockDeltaIndex:o,text:s,toolUse:(e=>{if(e)return{...e,input:JSON.parse(e.input)}})(a),stopReason:c}).filter(([e,t])=>null!==t))})(e);n&&s.error(n),t&&s.next(t)}):{}})(e,t,n,s,c),sendMessage:((e,t,n,i,o)=>async s=>{let{conversations:a}=t;if(!a)return{};let{content:c,aiContext:l,toolConfiguration:u}="string"==typeof s?{content:[{text:s}]}:s,p=ep(e,t,"mutation",a[i].message.send,!1,o,el(r.SendMessage)),{data:d,errors:h}=await p({conversationId:n,content:c.map(e=>e.image?eC(e):e.document?(({document:e})=>({document:{...e,source:{...e.source,bytes:e_(e.source.bytes)}}}))(e):e.toolResult?(({toolResult:e})=>({toolResult:{...e,content:e.content.map(e=>e.image?eC(e):e.json?(({json:e})=>({json:JSON.stringify(e)}))(e):e)}}))(e):e),...l&&{aiContext:JSON.stringify(l)},...u&&{toolConfiguration:(({tools:e})=>({tools:Object.entries(e).map(([e,t])=>({toolSpec:{name:e,description:t.description,inputSchema:{json:JSON.stringify(t.inputSchema.json)}}}))}))(u)}});return{data:d?ew(d):d,errors:h}})(e,t,n,s,c),listMessages:async i=>{let o=eT(e,t,a,c,!1,el(r.ListMessages)),{data:s,nextToken:l,errors:u}=await o({...i,filter:{conversationId:{eq:n}}});return{data:s.map(e=>ew(e)),nextToken:l,errors:u}}}},ex=(e,t,n,i,o,s)=>async a=>{let{name:c,metadata:l}=a??{},u=JSON.stringify(l),p=eE(e,t,i,"CREATE",s,!1,el(r.CreateConversation)),{data:d,errors:h}=await p({name:c,metadata:u});return{data:eD(e,t,d?.id,d?.createdAt,d?.updatedAt,n,o,s,d?.metadata,d?.name),errors:h}},eR=(e,t,n,i,o,s)=>async({id:a})=>{let c=eE(e,t,i,"GET",s,!1,el(r.GetConversation)),{data:l,errors:u}=await c({id:a});return{data:l?eD(e,t,l.id,l.createdAt,l.updatedAt,n,o,s,l?.metadata,l?.name):l,errors:u}},eL=(e,t,n,i,o,s)=>async a=>{let c=eT(e,t,i,s,!1,el(r.ListConversations)),{data:l,nextToken:u,errors:p}=await c(a);return{data:l.map(r=>eD(e,t,r.id,r.createdAt,r.updatedAt,n,o,s,r?.metadata,r?.name)),nextToken:u,errors:p}},eP=(e,t,n,i,o,s)=>async({id:a})=>{let c=eE(e,t,i,"DELETE",s,!1,el(r.DeleteConversation)),{data:l,errors:u}=await c({id:a});return{data:l?eD(e,t,l?.id,l?.createdAt,l?.updatedAt,n,o,s,l?.metadata,l?.name):l,errors:u}},eM=(e,t,n,i,o,s)=>async({id:a,metadata:c,name:l})=>{let u=JSON.stringify(c),p=eE(e,t,i,"UPDATE",s,!1,el(r.UpdateConversation)),{data:d,errors:h}=await p({id:a,metadata:u,name:l});return{data:d?eD(e,t,d?.id,d?.createdAt,d?.updatedAt,n,o,s,d?.metadata,d?.name):d,errors:h}};function eF(e,t,n,r,i,o,s){return B(async a=>{let{name:c}=n,l=et(t,n,"INDEX_QUERY",o,r),u=en(n,"INDEX_QUERY",o,t,r),p=ei(e,i,o),d=n=>J(e,c,n,t,p.authMode,p.authToken,!!s);try{let n=eo(e,i,o?.headers),r=[{...p,query:l,variables:u},n];void 0!==s&&r.unshift(s);let h=e.graphql(...r),f=G(h,a),y=await f;if(void 0!==y.data)return function(e,t,n,r,i){let{data:o,extensions:s}=n,[a]=Object.keys(o);if(o[a].items){let n=o[a].items.map(n=>W(e,t,n));return{data:r?n:i(n),nextToken:o[a].nextToken,extensions:s}}return{data:o[a],nextToken:o[a].nextToken,extensions:s}}(t,c,y,o?.selectionSet,d)}catch(r){let{data:e,errors:n}=r;if(null==e||0===Object.keys(e).length||!n)return es(r);{let[n]=Object.keys(e);if(e[n]?.items){let r=e[n]?.items.map(e=>W(t,c,e));if(r)return{data:o?.selectionSet?r:d(r),nextToken:e[n]?.nextToken}}return{data:e[n],nextToken:e[n]?.nextToken}}}})}var ej="function"==typeof Symbol&&Symbol.observable||"@@observable",eU=function(){function e(e){e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this,i=!function(e){return e&&e instanceof w||e&&f(e.next)&&f(e.error)&&f(e.complete)&&g(e)}(e)?new R(e,t,n):e;return!function(e){if(S.useDeprecatedSynchronousErrorHandling){var t=!k;if(t&&(k={errorThrown:!1,error:null}),e(),t){var n=k,r=n.errorThrown,i=n.error;if(k=null,r)throw i}}else e()}(function(){var e=r.operator,t=r.source;i.add(e?e.call(i,t):t?r._subscribe(i):r._trySubscribe(i))}),i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=e$(t))(function(t,r){var i=new R({next:function(t){try{e(t)}catch(e){r(e),i.unsubscribe()}},error:r,complete:t});n.subscribe(i)})},e.prototype._subscribe=function(e){var t;return null==(t=this.source)?void 0:t.subscribe(e)},e.prototype[ej]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return(0===e.length?function(e){return e}:1===e.length?e[0]:function(t){return e.reduce(function(e,t){return t(e)},t)})(this)},e.prototype.toPromise=function(e){var t=this;return new(e=e$(e))(function(e,n){var r;t.subscribe(function(e){return r=e},function(e){return n(e)},function(){return e(r)})})},e.create=function(t){return new e(t)},e}();function e$(e){var t;return null!=(t=null!=e?e:S.Promise)?t:Promise}let eK=e=>"key"===e.type&&e.properties?.name&&e.properties?.queryField&&e.properties?.fields.length>0,eB=e=>e.attributes?.filter(eK).map(e=>{let t=e.properties.queryField,[n,...r]=e.properties.fields;return{queryField:t,pk:n,sk:r}})||[],eV=(e,t)=>{let n=e.models[t].attributes?.find(e=>"model"===e.type),r={queries:["list","get","observeQuery"],mutations:["create","update","delete"],subscriptions:["onCreate","onUpdate","onDelete"]},i=[];if(!n)return z;if(n.properties)for(let[e,t]of Object.entries(n.properties))e in r&&(null===t?i.push(...r[e]):t instanceof Object&&i.push(...Object.keys(t)));i.includes("list")&&i.push("observeQuery");let o=i.map(e=>e.toUpperCase());return Object.fromEntries(Object.entries(z).filter(([e])=>!o.includes(e)))};function eG(e,t,n){let i=e.cancel.bind(e);return e.cancel=function(e,t){let n=new Set,r=e;for(;r&&V.has(r);){if(n.has(r))throw Error("A cycle was detected in the modeled graphql cancellation chain. This is a bug. Please report it!");n.add(r),r=V.get(r)}return i(r,t)},e.models=function(e,t,n){let r={},i=t.modelIntrospection;if(!i)return{};let o=["ONCREATE","ONUPDATE","ONDELETE"];for(let t of Object.values(i.models)){let{name:s}=t;for(let a of(r[s]={},Object.entries(eV(i,s)).forEach(([a,{operationPrefix:c}])=>{"LIST"===a?r[s][c]=eT(e,i,t,n):o.includes(a)?r[s][c]=function(e,t,n,r,i){let{name:o}=n;return s=>{let a=et(t,n,r,s),c=en(n,r,s,t),l=ei(e,i,s),u=eo(e,i,s?.headers);return e.graphql({...l,query:a,variables:c},u).pipe(U(n=>{let[r]=Object.keys(n.data),i=W(t,o,n.data[r]);if(null===i)return null;{if(s?.selectionSet)return i;let[n]=J(e,o,[i],t,l.authMode,l.authToken);return n}}))}}(e,i,t,a,n):"OBSERVEQUERY"===a?r[s][c]=function(e,t){let{name:n}=t;return r=>new eU(i=>{let o=[],s=[],a=(...e)=>s.push(...e),c=e[n].onCreate(r).subscribe({next(e){a({item:e,type:"create"})},error(e){i.error({type:"onCreate",error:e})}}),l=e[n].onUpdate(r).subscribe({next(e){a({item:e,type:"update"})},error(e){i.error({type:"onUpdate",error:e})}}),u=e[n].onDelete(r).subscribe({next(e){a({item:e,type:"delete"})},error(e){i.error({type:"onDelete",error:e})}});function p(e){for(let t of e){let e=function(e,t,n){let r=Object.fromEntries(n.map(t=>[t,e[t]]));for(let e=0;e<t.length;e++)if(Object.keys(r).every(n=>r[n]===t[e][n]))return e;return -1}(t.item,o,d);switch(t.type){case"create":e<0&&o.push(t.item);break;case"update":e>=0&&(o[e]=t.item);break;case"delete":e>=0&&o.splice(e,1);break;default:console.error("Unrecognized message in observeQuery.",t)}}i.next({items:o,isSynced:!0})}let d=function(e){let{primaryKeyFieldName:t,sortKeyFieldNames:n}=e.primaryKeyInfo;return[t,...n]}(t);return(async()=>{let t=!0,c=null;for(;!i.closed&&(t||c);){t=!1;let{data:a,errors:l,nextToken:u}=await e[n].list({...r,nextToken:c});c=u,o.push(...a);let p=0===s.length&&null==c;if(i.next({items:o,isSynced:p}),Array.isArray(l))for(let e of l)i.error(e)}s.length>0&&p(s),a=(...e)=>(p(e),o.length)})(),()=>{c.unsubscribe(),l.unsubscribe(),u.unsubscribe()}})}(r,t):r[s][c]=eE(e,i,t,a,n)}),eB(t)))r[s][a.queryField]=function(e,t,n,r,i,o=!1){return o?(o,s,a)=>eF(e,t,n,r,i,{...s,...a},o):(o,s)=>eF(e,t,n,r,i,{...o,...s})}(e,i,t,a,n)}return r}(e,t,n),e.enums=(e=>{let t=e.modelIntrospection;if(!t)return{};let n={};for(let[e,r]of Object.entries(t.enums))n[r.name]={values:()=>r.values};return n})(t),e.queries=eb(e,t,"queries",n),e.mutations=eb(e,t,"mutations",n),e.subscriptions=eb(e,t,"subscriptions",n),e.conversations=function(e,t,n){let r=t?.modelIntrospection;if(!r?.conversations)return{};let i={};for(let{name:t,conversation:o,message:s,models:a,nonModels:c,enums:l}of Object.values(r.conversations)){let u=a[o.modelName],p=a[s.modelName];if(!u||!p)return{};let d={...r,models:{...r.models,...a},nonModels:{...r.nonModels,...c},enums:{...r.enums,...l}};i[t]={update:eM(e,d,t,u,p,n),create:ex(e,d,t,u,p,n),get:eR(e,d,t,u,p,n),delete:eP(e,d,t,u,p,n),list:eL(e,d,t,u,p,n)}}return i}(e,t,n),e.generations=function(e,t,n){let i=t?.modelIntrospection;if(!i?.generations)return{};let o={};for(let t of Object.values(i.generations))o[t.name]=ep(e,i,"query",t,!1,n,el(r.Generation));return o}(e,t,n),e}!function(e){e.NO_API_KEY="No api-key configured",e.NO_CURRENT_USER="No current user",e.NO_CREDENTIALS="No credentials",e.NO_FEDERATED_JWT="No federated jwt",e.NO_AUTH_TOKEN="No auth token specified"}(i||(i={}));let eq=Symbol("amplify"),eY=Symbol("authMode"),eQ=Symbol("authToken"),eW=Symbol("apiKey"),eJ=Symbol("headers"),ez=Symbol("endpoint");function eH(e){return{amplify:e[eq],apiKey:e[eW],authMode:e[eY],authToken:e[eQ],endpoint:e[ez],headers:e[eJ]}}var eX=n(46199);function eZ(e){return(eZ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}"function"==typeof Symbol&&null!=Symbol.iterator&&Symbol.iterator,"function"==typeof Symbol&&null!=Symbol.asyncIterator&&Symbol.asyncIterator;var e0="function"==typeof Symbol&&null!=Symbol.toStringTag?Symbol.toStringTag:"@@toStringTag";function e1(e,t){for(var n,r=/\r\n|[\n\r]/g,i=1,o=t+1;(n=r.exec(e.body))&&n.index<t;)i+=1,o=t+1-(n.index+n[0].length);return{line:i,column:o}}function e2(e,t){var n=e.locationOffset.column-1,r=e4(n)+e.body,i=t.line-1,o=e.locationOffset.line-1,s=t.line+o,a=1===t.line?n:0,c=t.column+a,l="".concat(e.name,":").concat(s,":").concat(c,"\n"),u=r.split(/\r\n|[\n\r]/g),p=u[i];if(p.length>120){for(var d=Math.floor(c/80),h=c%80,f=[],y=0;y<p.length;y+=80)f.push(p.slice(y,y+80));return l+e3([["".concat(s),f[0]]].concat(f.slice(1,d+1).map(function(e){return["",e]}),[[" ",e4(h-1)+"^"],["",f[d+1]]]))}return l+e3([["".concat(s-1),u[i-1]],["".concat(s),p],["",e4(c-1)+"^"],["".concat(s+1),u[i+1]]])}function e3(e){var t=e.filter(function(e){return e[0],void 0!==e[1]}),n=Math.max.apply(Math,t.map(function(e){return e[0].length}));return t.map(function(e){var t,r=e[0],i=e[1];return e4(n-(t=r).length)+t+(i?" | "+i:" |")}).join("\n")}function e4(e){return Array(e+1).join(" ")}function e9(e){return(e9="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function e6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function e8(e,t){return t&&("object"===e9(t)||"function"==typeof t)?t:e5(e)}function e5(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function e7(e){var t="function"==typeof Map?new Map:void 0;return(e7=function(e){var n;if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;if("function"!=typeof e)throw TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return te(e,arguments,tr(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),tn(r,e)})(e)}function te(e,t,n){return(te=tt()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&tn(i,n.prototype),i}).apply(null,arguments)}function tt(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function tn(e,t){return(tn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function tr(e){return(tr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ti=function(e){if("function"!=typeof e&&null!==e)throw TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),e&&tn(i,e);var t,n,r=(t=tt(),function(){var e,n=tr(i);return e=t?Reflect.construct(n,arguments,tr(this).constructor):n.apply(this,arguments),e8(this,e)});function i(e,t,n,o,s,a,c){if(!(this instanceof i))throw TypeError("Cannot call a class as a function");(m=r.call(this,e)).name="GraphQLError",m.originalError=null!=a?a:void 0,m.nodes=to(Array.isArray(t)?t:t?[t]:void 0);for(var l=[],u=0,p=null!=(v=m.nodes)?v:[];u<p.length;u++){var d,h,f,y,m,v,b=p[u].loc;null!=b&&l.push(b)}l=to(l),m.source=null!=n?n:null==(h=l)?void 0:h[0].source,m.positions=null!=o?o:null==(f=l)?void 0:f.map(function(e){return e.start}),m.locations=o&&n?o.map(function(e){return e1(n,e)}):null==(y=l)?void 0:y.map(function(e){return e1(e.source,e.start)}),m.path=null!=s?s:void 0;var E=null==a?void 0:a.extensions;return null==c&&"object"==eZ(d=E)&&null!==d?m.extensions=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?e6(Object(n),!0).forEach(function(t){var r,i,o;r=e,i=t,o=n[t],i in r?Object.defineProperty(r,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):r[i]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e6(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},E):m.extensions=null!=c?c:{},(Object.defineProperties(e5(m),{message:{enumerable:!0},locations:{enumerable:null!=m.locations},path:{enumerable:null!=m.path},extensions:{enumerable:null!=m.extensions&&Object.keys(m.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),null!=a&&a.stack)?(Object.defineProperty(e5(m),"stack",{value:a.stack,writable:!0,configurable:!0}),e8(m)):(Error.captureStackTrace?Error.captureStackTrace(e5(m),i):Object.defineProperty(e5(m),"stack",{value:Error().stack,writable:!0,configurable:!0}),m)}return n=[{key:"toString",value:function(){return function(e){var t=e.message;if(e.nodes)for(var n=0,r=e.nodes;n<r.length;n++){var i,o=r[n];o.loc&&(t+="\n\n"+e2((i=o.loc).source,e1(i.source,i.start)))}else if(e.source&&e.locations)for(var s=0,a=e.locations;s<a.length;s++){var c=a[s];t+="\n\n"+e2(e.source,c)}return t}(this)}},{key:e0,get:function(){return"Object"}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(i.prototype,n),i}(e7(Error));function to(e){return void 0===e||0===e.length?void 0:e}function ts(e,t,n){return new ti("Syntax Error: ".concat(n),void 0,e,[t])}var ta=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),tc="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):void 0;function tl(e){var t=e.prototype.toJSON;"function"==typeof t||function(e,t){throw Error("Unexpected invariant triggered.")}(0),e.prototype.inspect=t,tc&&(e.prototype[tc]=t)}var tu=function(){function e(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}return e.prototype.toJSON=function(){return{start:this.start,end:this.end}},e}();tl(tu);var tp=function(){function e(e,t,n,r,i,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=i,this.value=s,this.prev=o,this.next=null}return e.prototype.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},e}();function td(e){return null!=e&&"string"==typeof e.kind}tl(tp);var th=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function tf(e){return(tf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ty(e,t){switch(tf(e)){case"string":return JSON.stringify(e);case"function":return e.name?"[function ".concat(e.name,"]"):"[function]";case"object":if(null===e)return"null";return function(e,t){if(-1!==t.indexOf(e))return"[Circular]";var n,r,i,o,s,a=[].concat(t,[e]),c="function"==typeof(r=(n=e)[String(tc)])?r:"function"==typeof n.inspect?n.inspect:void 0;if(void 0!==c){var l=c.call(e);if(l!==e)return"string"==typeof l?l:ty(l,a)}else if(Array.isArray(e)){var u=e,p=a;if(0===u.length)return"[]";if(p.length>2)return"[Array]";for(var d=Math.min(10,u.length),h=u.length-d,f=[],y=0;y<d;++y)f.push(ty(u[y],p));return 1===h?f.push("... 1 more item"):h>1&&f.push("... ".concat(h," more items")),"["+f.join(", ")+"]"}return i=e,o=a,0===(s=Object.keys(i)).length?"{}":o.length>2?"["+function(e){var t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if("Object"===t&&"function"==typeof e.constructor){var n=e.constructor.name;if("string"==typeof n&&""!==n)return n}return t}(i)+"]":"{ "+s.map(function(e){var t=ty(i[e],o);return e+": "+t}).join(", ")+" }"}(e,t);default:return String(e)}}function tm(e,t){if(!e)throw Error(t)}var tv=function(){var e;function t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GraphQL request",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{line:1,column:1};"string"==typeof e||tm(0,"Body must be a string. Received: ".concat(ty(e,[]),".")),this.body=e,this.name=t,this.locationOffset=n,this.locationOffset.line>0||tm(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||tm(0,"column in locationOffset is 1-indexed and must be positive.")}return e=[{key:e0,get:function(){return"Source"}}],function(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(t.prototype,e),t}(),tb=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function tE(e){for(var t=0;t<e.length;++t)if(" "!==e[t]&&"	"!==e[t])return!1;return!0}var tg=function(){function e(e){var t=new tp(th.SOF,0,0,0,0,null);this.source=e,this.lastToken=t,this.token=t,this.line=1,this.lineStart=0}var t=e.prototype;return t.advance=function(){return this.lastToken=this.token,this.token=this.lookahead()},t.lookahead=function(){var e,t=this.token;if(t.kind!==th.EOF)do t=null!=(e=t.next)?e:t.next=function(e,t){for(var n=e.source,r=n.body,i=r.length,o=t.end;o<i;){var s,a=r.charCodeAt(o),c=e.line,l=1+o-e.lineStart;switch(a){case 65279:case 9:case 32:case 44:++o;continue;case 10:++o,++e.line,e.lineStart=o;continue;case 13:10===r.charCodeAt(o+1)?o+=2:++o,++e.line,e.lineStart=o;continue;case 33:return new tp(th.BANG,o,o+1,c,l,t);case 35:return function(e,t,n,r,i){var o,s=e.body,a=t;do o=s.charCodeAt(++a);while(!isNaN(o)&&(o>31||9===o));return new tp(th.COMMENT,t,a,n,r,i,s.slice(t+1,a))}(n,o,c,l,t);case 36:return new tp(th.DOLLAR,o,o+1,c,l,t);case 38:return new tp(th.AMP,o,o+1,c,l,t);case 40:return new tp(th.PAREN_L,o,o+1,c,l,t);case 41:return new tp(th.PAREN_R,o,o+1,c,l,t);case 46:if(46===r.charCodeAt(o+1)&&46===r.charCodeAt(o+2))return new tp(th.SPREAD,o,o+3,c,l,t);break;case 58:return new tp(th.COLON,o,o+1,c,l,t);case 61:return new tp(th.EQUALS,o,o+1,c,l,t);case 64:return new tp(th.AT,o,o+1,c,l,t);case 91:return new tp(th.BRACKET_L,o,o+1,c,l,t);case 93:return new tp(th.BRACKET_R,o,o+1,c,l,t);case 123:return new tp(th.BRACE_L,o,o+1,c,l,t);case 124:return new tp(th.PIPE,o,o+1,c,l,t);case 125:return new tp(th.BRACE_R,o,o+1,c,l,t);case 34:if(34===r.charCodeAt(o+1)&&34===r.charCodeAt(o+2))return function(e,t,n,r,i,o){for(var s=e.body,a=t+3,c=a,l=0,u="";a<s.length&&!isNaN(l=s.charCodeAt(a));){if(34===l&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2))return u+=s.slice(c,a),new tp(th.BLOCK_STRING,t,a+3,n,r,i,function(e){var t=e.split(/\r\n|[\n\r]/g),n=function(e){for(var t,n=!0,r=!0,i=0,o=null,s=0;s<e.length;++s)switch(e.charCodeAt(s)){case 13:10===e.charCodeAt(s+1)&&++s;case 10:n=!1,r=!0,i=0;break;case 9:case 32:++i;break;default:r&&!n&&(null===o||i<o)&&(o=i),r=!1}return null!=(t=o)?t:0}(e);if(0!==n)for(var r=1;r<t.length;r++)t[r]=t[r].slice(n);for(var i=0;i<t.length&&tE(t[i]);)++i;for(var o=t.length;o>i&&tE(t[o-1]);)--o;return t.slice(i,o).join("\n")}(u));if(l<32&&9!==l&&10!==l&&13!==l)throw ts(e,a,"Invalid character within String: ".concat(tT(l),"."));10===l?(++a,++o.line,o.lineStart=a):13===l?(10===s.charCodeAt(a+1)?a+=2:++a,++o.line,o.lineStart=a):92===l&&34===s.charCodeAt(a+1)&&34===s.charCodeAt(a+2)&&34===s.charCodeAt(a+3)?(u+=s.slice(c,a)+'"""',a+=4,c=a):++a}throw ts(e,a,"Unterminated string.")}(n,o,c,l,t,e);return function(e,t,n,r,i){for(var o=e.body,s=t+1,a=s,c=0,l="";s<o.length&&!isNaN(c=o.charCodeAt(s))&&10!==c&&13!==c;){if(34===c)return l+=o.slice(a,s),new tp(th.STRING,t,s+1,n,r,i,l);if(c<32&&9!==c)throw ts(e,s,"Invalid character within String: ".concat(tT(c),"."));if(++s,92===c){switch(l+=o.slice(a,s-1),c=o.charCodeAt(s)){case 34:l+='"';break;case 47:l+="/";break;case 92:l+="\\";break;case 98:l+="\b";break;case 102:l+="\f";break;case 110:l+="\n";break;case 114:l+="\r";break;case 116:l+="	";break;case 117:var u,p,d,h,f=(u=o.charCodeAt(s+1),p=o.charCodeAt(s+2),d=o.charCodeAt(s+3),h=o.charCodeAt(s+4),tN(u)<<12|tN(p)<<8|tN(d)<<4|tN(h));if(f<0){var y=o.slice(s+1,s+5);throw ts(e,s,"Invalid character escape sequence: \\u".concat(y,"."))}l+=String.fromCharCode(f),s+=4;break;default:throw ts(e,s,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}a=++s}}throw ts(e,s,"Unterminated string.")}(n,o,c,l,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,r,i,o){var s,a=e.body,c=n,l=t,u=!1;if(45===c&&(c=a.charCodeAt(++l)),48===c){if((c=a.charCodeAt(++l))>=48&&c<=57)throw ts(e,l,"Invalid number, unexpected digit after 0: ".concat(tT(c),"."))}else l=tS(e,l,c),c=a.charCodeAt(l);if(46===c&&(u=!0,c=a.charCodeAt(++l),l=tS(e,l,c),c=a.charCodeAt(l)),(69===c||101===c)&&(u=!0,(43===(c=a.charCodeAt(++l))||45===c)&&(c=a.charCodeAt(++l)),l=tS(e,l,c),c=a.charCodeAt(l)),46===c||95===(s=c)||s>=65&&s<=90||s>=97&&s<=122)throw ts(e,l,"Invalid number, expected digit but got: ".concat(tT(c),"."));return new tp(u?th.FLOAT:th.INT,t,l,r,i,o,a.slice(t,l))}(n,o,a,c,l,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:for(var u=n,p=o,d=c,h=l,f=t,y=u.body,m=y.length,v=p+1,b=0;v!==m&&!isNaN(b=y.charCodeAt(v))&&(95===b||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122);)++v;return new tp(th.NAME,p,v,d,h,f,y.slice(p,v))}throw ts(n,o,(s=a)<32&&9!==s&&10!==s&&13!==s?"Cannot contain the invalid character ".concat(tT(s),"."):39===s?"Unexpected single quote character ('), did you mean to use a double quote (\")?":"Cannot parse the unexpected character ".concat(tT(s),"."))}var E=e.line,g=1+o-e.lineStart;return new tp(th.EOF,i,i,E,g,t)}(this,t);while(t.kind===th.COMMENT);return t},e}();function tT(e){return isNaN(e)?th.EOF:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'.concat(("00"+e.toString(16).toUpperCase()).slice(-4),'"')}function tS(e,t,n){var r=e.body,i=t,o=n;if(o>=48&&o<=57){do o=r.charCodeAt(++i);while(o>=48&&o<=57);return i}throw ts(e,i,"Invalid number, expected digit but got: ".concat(tT(o),"."))}function tN(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function tO(e,t){return new tA(e,t).parseDocument()}var tA=function(){function e(e,t){var n=e instanceof tv?e:new tv(e);this._lexer=new tg(n),this._options=t}var t=e.prototype;return t.parseName=function(){var e=this.expectToken(th.NAME);return{kind:ta.NAME,value:e.value,loc:this.loc(e)}},t.parseDocument=function(){var e=this._lexer.token;return{kind:ta.DOCUMENT,definitions:this.many(th.SOF,this.parseDefinition,th.EOF),loc:this.loc(e)}},t.parseDefinition=function(){if(this.peek(th.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else if(this.peek(th.BRACE_L))return this.parseOperationDefinition();else if(this.peekDescription())return this.parseTypeSystemDefinition();throw this.unexpected()},t.parseOperationDefinition=function(){var e,t=this._lexer.token;if(this.peek(th.BRACE_L))return{kind:ta.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(t)};var n=this.parseOperationType();return this.peek(th.NAME)&&(e=this.parseName()),{kind:ta.OPERATION_DEFINITION,operation:n,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseOperationType=function(){var e=this.expectToken(th.NAME);switch(e.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(e)},t.parseVariableDefinitions=function(){return this.optionalMany(th.PAREN_L,this.parseVariableDefinition,th.PAREN_R)},t.parseVariableDefinition=function(){var e=this._lexer.token;return{kind:ta.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(th.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(th.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(e)}},t.parseVariable=function(){var e=this._lexer.token;return this.expectToken(th.DOLLAR),{kind:ta.VARIABLE,name:this.parseName(),loc:this.loc(e)}},t.parseSelectionSet=function(){var e=this._lexer.token;return{kind:ta.SELECTION_SET,selections:this.many(th.BRACE_L,this.parseSelection,th.BRACE_R),loc:this.loc(e)}},t.parseSelection=function(){return this.peek(th.SPREAD)?this.parseFragment():this.parseField()},t.parseField=function(){var e,t,n=this._lexer.token,r=this.parseName();return this.expectOptionalToken(th.COLON)?(e=r,t=this.parseName()):t=r,{kind:ta.FIELD,alias:e,name:t,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(th.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},t.parseArguments=function(e){var t=e?this.parseConstArgument:this.parseArgument;return this.optionalMany(th.PAREN_L,t,th.PAREN_R)},t.parseArgument=function(){var e=this._lexer.token,t=this.parseName();return this.expectToken(th.COLON),{kind:ta.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(e)}},t.parseConstArgument=function(){var e=this._lexer.token;return{kind:ta.ARGUMENT,name:this.parseName(),value:(this.expectToken(th.COLON),this.parseValueLiteral(!0)),loc:this.loc(e)}},t.parseFragment=function(){var e=this._lexer.token;this.expectToken(th.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(th.NAME)?{kind:ta.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(e)}:{kind:ta.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(e)}},t.parseFragmentDefinition=function(){var e,t=this._lexer.token;return(this.expectKeyword("fragment"),(null==(e=this._options)?void 0:e.experimentalFragmentVariables)===!0)?{kind:ta.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:ta.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},t.parseFragmentName=function(){if("on"===this._lexer.token.value)throw this.unexpected();return this.parseName()},t.parseValueLiteral=function(e){var t=this._lexer.token;switch(t.kind){case th.BRACKET_L:return this.parseList(e);case th.BRACE_L:return this.parseObject(e);case th.INT:return this._lexer.advance(),{kind:ta.INT,value:t.value,loc:this.loc(t)};case th.FLOAT:return this._lexer.advance(),{kind:ta.FLOAT,value:t.value,loc:this.loc(t)};case th.STRING:case th.BLOCK_STRING:return this.parseStringLiteral();case th.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:ta.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:ta.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:ta.NULL,loc:this.loc(t)};default:return{kind:ta.ENUM,value:t.value,loc:this.loc(t)}}case th.DOLLAR:if(!e)return this.parseVariable()}throw this.unexpected()},t.parseStringLiteral=function(){var e=this._lexer.token;return this._lexer.advance(),{kind:ta.STRING,value:e.value,block:e.kind===th.BLOCK_STRING,loc:this.loc(e)}},t.parseList=function(e){var t=this,n=this._lexer.token;return{kind:ta.LIST,values:this.any(th.BRACKET_L,function(){return t.parseValueLiteral(e)},th.BRACKET_R),loc:this.loc(n)}},t.parseObject=function(e){var t=this,n=this._lexer.token;return{kind:ta.OBJECT,fields:this.any(th.BRACE_L,function(){return t.parseObjectField(e)},th.BRACE_R),loc:this.loc(n)}},t.parseObjectField=function(e){var t=this._lexer.token,n=this.parseName();return this.expectToken(th.COLON),{kind:ta.OBJECT_FIELD,name:n,value:this.parseValueLiteral(e),loc:this.loc(t)}},t.parseDirectives=function(e){for(var t=[];this.peek(th.AT);)t.push(this.parseDirective(e));return t},t.parseDirective=function(e){var t=this._lexer.token;return this.expectToken(th.AT),{kind:ta.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(e),loc:this.loc(t)}},t.parseTypeReference=function(){var e,t=this._lexer.token;return(this.expectOptionalToken(th.BRACKET_L)?(e=this.parseTypeReference(),this.expectToken(th.BRACKET_R),e={kind:ta.LIST_TYPE,type:e,loc:this.loc(t)}):e=this.parseNamedType(),this.expectOptionalToken(th.BANG))?{kind:ta.NON_NULL_TYPE,type:e,loc:this.loc(t)}:e},t.parseNamedType=function(){var e=this._lexer.token;return{kind:ta.NAMED_TYPE,name:this.parseName(),loc:this.loc(e)}},t.parseTypeSystemDefinition=function(){var e=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(e.kind===th.NAME)switch(e.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(e)},t.peekDescription=function(){return this.peek(th.STRING)||this.peek(th.BLOCK_STRING)},t.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},t.parseSchemaDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var n=this.parseDirectives(!0),r=this.many(th.BRACE_L,this.parseOperationTypeDefinition,th.BRACE_R);return{kind:ta.SCHEMA_DEFINITION,description:t,directives:n,operationTypes:r,loc:this.loc(e)}},t.parseOperationTypeDefinition=function(){var e=this._lexer.token,t=this.parseOperationType();this.expectToken(th.COLON);var n=this.parseNamedType();return{kind:ta.OPERATION_TYPE_DEFINITION,operation:t,type:n,loc:this.loc(e)}},t.parseScalarTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var n=this.parseName(),r=this.parseDirectives(!0);return{kind:ta.SCALAR_TYPE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:ta.OBJECT_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseImplementsInterfaces=function(){var e;if(!this.expectOptionalKeyword("implements"))return[];if((null==(e=this._options)?void 0:e.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(th.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(th.AMP)||this.peek(th.NAME));return t}return this.delimitedMany(th.AMP,this.parseNamedType)},t.parseFieldsDefinition=function(){var e;return(null==(e=this._options)?void 0:e.allowLegacySDLEmptyFields)===!0&&this.peek(th.BRACE_L)&&this._lexer.lookahead().kind===th.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(th.BRACE_L,this.parseFieldDefinition,th.BRACE_R)},t.parseFieldDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseArgumentDefs();this.expectToken(th.COLON);var i=this.parseTypeReference(),o=this.parseDirectives(!0);return{kind:ta.FIELD_DEFINITION,description:t,name:n,arguments:r,type:i,directives:o,loc:this.loc(e)}},t.parseArgumentDefs=function(){return this.optionalMany(th.PAREN_L,this.parseInputValueDef,th.PAREN_R)},t.parseInputValueDef=function(){var e,t=this._lexer.token,n=this.parseDescription(),r=this.parseName();this.expectToken(th.COLON);var i=this.parseTypeReference();this.expectOptionalToken(th.EQUALS)&&(e=this.parseValueLiteral(!0));var o=this.parseDirectives(!0);return{kind:ta.INPUT_VALUE_DEFINITION,description:n,name:r,type:i,defaultValue:e,directives:o,loc:this.loc(t)}},t.parseInterfaceTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var n=this.parseName(),r=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();return{kind:ta.INTERFACE_TYPE_DEFINITION,description:t,name:n,interfaces:r,directives:i,fields:o,loc:this.loc(e)}},t.parseUnionTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseUnionMemberTypes();return{kind:ta.UNION_TYPE_DEFINITION,description:t,name:n,directives:r,types:i,loc:this.loc(e)}},t.parseUnionMemberTypes=function(){return this.expectOptionalToken(th.EQUALS)?this.delimitedMany(th.PIPE,this.parseNamedType):[]},t.parseEnumTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();return{kind:ta.ENUM_TYPE_DEFINITION,description:t,name:n,directives:r,values:i,loc:this.loc(e)}},t.parseEnumValuesDefinition=function(){return this.optionalMany(th.BRACE_L,this.parseEnumValueDefinition,th.BRACE_R)},t.parseEnumValueDefinition=function(){var e=this._lexer.token,t=this.parseDescription(),n=this.parseName(),r=this.parseDirectives(!0);return{kind:ta.ENUM_VALUE_DEFINITION,description:t,name:n,directives:r,loc:this.loc(e)}},t.parseInputObjectTypeDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var n=this.parseName(),r=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();return{kind:ta.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInputFieldsDefinition=function(){return this.optionalMany(th.BRACE_L,this.parseInputValueDef,th.BRACE_R)},t.parseTypeSystemExtension=function(){var e=this._lexer.lookahead();if(e.kind===th.NAME)switch(e.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(e)},t.parseSchemaExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),n=this.optionalMany(th.BRACE_L,this.parseOperationTypeDefinition,th.BRACE_R);if(0===t.length&&0===n.length)throw this.unexpected();return{kind:ta.SCHEMA_EXTENSION,directives:t,operationTypes:n,loc:this.loc(e)}},t.parseScalarTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),n=this.parseDirectives(!0);if(0===n.length)throw this.unexpected();return{kind:ta.SCALAR_TYPE_EXTENSION,name:t,directives:n,loc:this.loc(e)}},t.parseObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:ta.OBJECT_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseInterfaceTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),n=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),i=this.parseFieldsDefinition();if(0===n.length&&0===r.length&&0===i.length)throw this.unexpected();return{kind:ta.INTERFACE_TYPE_EXTENSION,name:t,interfaces:n,directives:r,fields:i,loc:this.loc(e)}},t.parseUnionTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:ta.UNION_TYPE_EXTENSION,name:t,directives:n,types:r,loc:this.loc(e)}},t.parseEnumTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:ta.ENUM_TYPE_EXTENSION,name:t,directives:n,values:r,loc:this.loc(e)}},t.parseInputObjectTypeExtension=function(){var e=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),n=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(0===n.length&&0===r.length)throw this.unexpected();return{kind:ta.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:n,fields:r,loc:this.loc(e)}},t.parseDirectiveDefinition=function(){var e=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(th.AT);var n=this.parseName(),r=this.parseArgumentDefs(),i=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var o=this.parseDirectiveLocations();return{kind:ta.DIRECTIVE_DEFINITION,description:t,name:n,arguments:r,repeatable:i,locations:o,loc:this.loc(e)}},t.parseDirectiveLocations=function(){return this.delimitedMany(th.PIPE,this.parseDirectiveLocation)},t.parseDirectiveLocation=function(){var e=this._lexer.token,t=this.parseName();if(void 0!==tb[t.value])return t;throw this.unexpected(e)},t.loc=function(e){var t;if((null==(t=this._options)?void 0:t.noLocation)!==!0)return new tu(e,this._lexer.lastToken,this._lexer.source)},t.peek=function(e){return this._lexer.token.kind===e},t.expectToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t;throw ts(this._lexer.source,t.start,"Expected ".concat(tI(e),", found ").concat(t_(t),"."))},t.expectOptionalToken=function(e){var t=this._lexer.token;if(t.kind===e)return this._lexer.advance(),t},t.expectKeyword=function(e){var t=this._lexer.token;if(t.kind===th.NAME&&t.value===e)this._lexer.advance();else throw ts(this._lexer.source,t.start,'Expected "'.concat(e,'", found ').concat(t_(t),"."))},t.expectOptionalKeyword=function(e){var t=this._lexer.token;return t.kind===th.NAME&&t.value===e&&(this._lexer.advance(),!0)},t.unexpected=function(e){var t=null!=e?e:this._lexer.token;return ts(this._lexer.source,t.start,"Unexpected ".concat(t_(t),"."))},t.any=function(e,t,n){this.expectToken(e);for(var r=[];!this.expectOptionalToken(n);)r.push(t.call(this));return r},t.optionalMany=function(e,t,n){if(this.expectOptionalToken(e)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r}return[]},t.many=function(e,t,n){this.expectToken(e);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(n));return r},t.delimitedMany=function(e,t){this.expectOptionalToken(e);var n=[];do n.push(t.call(this));while(this.expectOptionalToken(e));return n},e}();function t_(e){var t=e.value;return tI(e.kind)+(null!=t?' "'.concat(t,'"'):"")}function tI(e){return e===th.BANG||e===th.DOLLAR||e===th.AMP||e===th.PAREN_L||e===th.PAREN_R||e===th.SPREAD||e===th.COLON||e===th.EQUALS||e===th.AT||e===th.BRACKET_L||e===th.BRACKET_R||e===th.BRACE_L||e===th.PIPE||e===th.BRACE_R?'"'.concat(e,'"'):e}var tk={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},tw=Object.freeze({});function tC(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:tk,r=void 0,i=Array.isArray(e),o=[e],s=-1,a=[],c=void 0,l=void 0,u=void 0,p=[],d=[],h=e;do{var f,y=++s===o.length,m=y&&0!==a.length;if(y){if(l=0===d.length?void 0:p[p.length-1],c=u,u=d.pop(),m){if(i)c=c.slice();else{for(var v={},b=0,E=Object.keys(c);b<E.length;b++){var g=E[b];v[g]=c[g]}c=v}for(var T=0,S=0;S<a.length;S++){var N=a[S][0],O=a[S][1];i&&(N-=T),i&&null===O?(c.splice(N,1),T++):c[N]=O}}s=r.index,o=r.keys,a=r.edits,i=r.inArray,r=r.prev}else{if(l=u?i?s:o[s]:void 0,null==(c=u?u[l]:h))continue;u&&p.push(l)}var A=void 0;if(!Array.isArray(c)){if(!td(c))throw Error("Invalid AST Node: ".concat(ty(c,[]),"."));var _=function(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var i=n?r.leave:r.enter;if("function"==typeof i)return i}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}(t,c.kind,y);if(_){if((A=_.call(t,c,l,u,p,d))===tw)break;if(!1===A){if(!y){p.pop();continue}}else if(void 0!==A&&(a.push([l,A]),!y))if(td(A))c=A;else{p.pop();continue}}}void 0===A&&m&&a.push([l,c]),y?p.pop():(r={inArray:i,index:s,keys:o,edits:a,prev:r},o=(i=Array.isArray(c))?c:null!=(f=n[c.kind])?f:[],s=-1,a=[],u&&d.push(u),u=c)}while(void 0!==r);return 0!==a.length&&(h=a[a.length-1][1]),h}(e,{leave:tD})}var tD={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return tR(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=tP("(",tR(e.variableDefinitions,", "),")"),i=tR(e.directives," "),o=e.selectionSet;return n||i||r||"query"!==t?tR([t,tR([n,r]),i,o]," "):o},VariableDefinition:function(e){var t=e.variable,n=e.type,r=e.defaultValue,i=e.directives;return t+": "+n+tP(" = ",r)+tP(" ",tR(i," "))},SelectionSet:function(e){return tL(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,i=e.directives,o=e.selectionSet,s=tP("",t,": ")+n,a=s+tP("(",tR(r,", "),")");return a.length>80&&(a=s+tP("(\n",tM(tR(r,"\n")),"\n)")),tR([a,tR(i," "),o]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+tP(" ",tR(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return tR(["...",tP("on ",t),tR(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,i=e.directives,o=e.selectionSet;return"fragment ".concat(t).concat(tP("(",tR(r,", "),")")," ")+"on ".concat(n," ").concat(tP("",tR(i," ")," "))+o},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=-1===e.indexOf("\n"),i=" "===e[0]||"	"===e[0],o='"'===e[e.length-1],s="\\"===e[e.length-1],a=!r||o||s||n,c="";return a&&!(r&&i)&&(c+="\n"+t),c+=t?e.replace(/\n/g,"\n"+t):e,a&&(c+="\n"),'"""'+c.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t?"":"  "):JSON.stringify(n)},BooleanValue:function(e){return e.value?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+tR(e.values,", ")+"]"},ObjectValue:function(e){return"{"+tR(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+tP("(",tR(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:tx(function(e){var t=e.directives,n=e.operationTypes;return tR(["schema",tR(t," "),tL(n)]," ")}),OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:tx(function(e){return tR(["scalar",e.name,tR(e.directives," ")]," ")}),ObjectTypeDefinition:tx(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return tR(["type",t,tP("implements ",tR(n," & ")),tR(r," "),tL(i)]," ")}),FieldDefinition:tx(function(e){var t=e.name,n=e.arguments,r=e.type,i=e.directives;return t+(tj(n)?tP("(\n",tM(tR(n,"\n")),"\n)"):tP("(",tR(n,", "),")"))+": "+r+tP(" ",tR(i," "))}),InputValueDefinition:tx(function(e){var t=e.name,n=e.type,r=e.defaultValue,i=e.directives;return tR([t+": "+n,tP("= ",r),tR(i," ")]," ")}),InterfaceTypeDefinition:tx(function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return tR(["interface",t,tP("implements ",tR(n," & ")),tR(r," "),tL(i)]," ")}),UnionTypeDefinition:tx(function(e){var t=e.name,n=e.directives,r=e.types;return tR(["union",t,tR(n," "),r&&0!==r.length?"= "+tR(r," | "):""]," ")}),EnumTypeDefinition:tx(function(e){var t=e.name,n=e.directives,r=e.values;return tR(["enum",t,tR(n," "),tL(r)]," ")}),EnumValueDefinition:tx(function(e){return tR([e.name,tR(e.directives," ")]," ")}),InputObjectTypeDefinition:tx(function(e){var t=e.name,n=e.directives,r=e.fields;return tR(["input",t,tR(n," "),tL(r)]," ")}),DirectiveDefinition:tx(function(e){var t=e.name,n=e.arguments,r=e.repeatable,i=e.locations;return"directive @"+t+(tj(n)?tP("(\n",tM(tR(n,"\n")),"\n)"):tP("(",tR(n,", "),")"))+(r?" repeatable":"")+" on "+tR(i," | ")}),SchemaExtension:function(e){var t=e.directives,n=e.operationTypes;return tR(["extend schema",tR(t," "),tL(n)]," ")},ScalarTypeExtension:function(e){return tR(["extend scalar",e.name,tR(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return tR(["extend type",t,tP("implements ",tR(n," & ")),tR(r," "),tL(i)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,i=e.fields;return tR(["extend interface",t,tP("implements ",tR(n," & ")),tR(r," "),tL(i)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return tR(["extend union",t,tR(n," "),r&&0!==r.length?"= "+tR(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return tR(["extend enum",t,tR(n," "),tL(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return tR(["extend input",t,tR(n," "),tL(r)]," ")}};function tx(e){return function(t){return tR([t.description,e(t)],"\n")}}function tR(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return null!=(t=null==e?void 0:e.filter(function(e){return e}).join(n))?t:""}function tL(e){return tP("{\n",tM(tR(e,"\n")),"\n}")}function tP(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return null!=t&&""!==t?e+t+n:""}function tM(e){return tP("  ",e.replace(/\n/g,"\n  "))}function tF(e){return -1!==e.indexOf("\n")}function tj(e){return null!=e&&e.some(tF)}var tU="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator";function t$(e){var t,n,r,i,o,s,a,c,l,u;if(e instanceof eU)return e;if(null!=e){if(f(e[ej])){return t=e,new eU(function(e){var n=t[ej]();if(f(n.subscribe))return n.subscribe(e);throw TypeError("Provided object does not correctly implement Symbol.observable")})}if((n=e)&&"number"==typeof n.length&&"function"!=typeof n){return r=e,new eU(function(e){for(var t=0;t<r.length&&!e.closed;t++)e.next(r[t]);e.complete()})}if(f(null==(i=e)?void 0:i.then)){return o=e,new eU(function(e){o.then(function(t){e.closed||(e.next(t),e.complete())},function(t){return e.error(t)}).then(null,O)})}if(s=e,Symbol.asyncIterator&&f(null==s?void 0:s[Symbol.asyncIterator]))return tK(e);if(f(null==(a=e)?void 0:a[tU])){return c=e,new eU(function(e){var t,n;try{for(var r=(0,m.Ju)(c),i=r.next();!i.done;i=r.next()){var o=i.value;if(e.next(o),e.closed)return}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.complete()})}if(f(null==(l=e)?void 0:l.getReader))return tK(function(e){return(0,m.AQ)(this,arguments,function(){var t,n,r;return(0,m.YH)(this,function(i){switch(i.label){case 0:t=e.getReader(),i.label=1;case 1:i.trys.push([1,,9,10]),i.label=2;case 2:return[4,(0,m.N3)(t.read())];case 3:if(r=(n=i.sent()).value,!n.done)return[3,5];return[4,(0,m.N3)(void 0)];case 4:return[2,i.sent()];case 5:return[4,(0,m.N3)(r)];case 6:return[4,i.sent()];case 7:return i.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}(e))}throw TypeError("You provided "+(null!==(u=e)&&"object"==typeof u?"an invalid object":"'"+u+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function tK(e){return new eU(function(t){(function(e,t){var n,r,i,o;return(0,m.sH)(this,void 0,void 0,function(){var s;return(0,m.YH)(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),n=(0,m.xN)(e),a.label=1;case 1:return[4,n.next()];case 2:if((r=a.sent()).done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return i={error:a.sent()},[3,11];case 6:if(a.trys.push([6,,9,10]),!(r&&!r.done&&(o=n.return)))return[3,8];return[4,o.call(n)];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})})(e,t).catch(function(e){return t.error(e)})})}var tB=n(99896),tV=n(86976),tG=n(61848);class tq extends tG.x{get response(){return this._response?tY(this._response):void 0}constructor(e){super(e),this.constructor=tq,Object.setPrototypeOf(this,tq.prototype),e.response&&(this._response=e.response)}}let tY=e=>({...e,headers:{...e.headers}});class tQ extends tq{constructor(e){super(e),this.constructor=tQ,Object.setPrototypeOf(this,tQ.prototype)}}class tW extends tQ{constructor(e={}){super({name:"CanceledError",message:"Request is canceled by user",...e}),this.constructor=tW,Object.setPrototypeOf(this,tW.prototype)}}let tJ=e=>!!e&&e instanceof tW;(o||(o={})).InvalidApiName="InvalidApiName",o.InvalidApiName;var tz=n(31851);let tH=async e=>{if(!e)return;let t=await (0,tz.F)(tX(e));if(t){let n=await e.body?.text();return tZ(t,{statusCode:e.statusCode,headers:e.headers,body:n})}},tX=e=>{let t,n=new Proxy(e.body,{get:(e,n,r)=>"json"===n?async()=>{t||(t=e.text());try{return JSON.parse(await t)}catch(e){return{}}}:"text"===n?async()=>(t||(t=e.text()),t):Reflect.get(e,n,r)});return new Proxy(e,{get:(e,t,r)=>"body"===t?n:Reflect.get(e,t,r)})},tZ=(e,t)=>Object.assign(new tQ({name:e?.name,message:e.message,underlyingError:e,response:t}),{$metadata:e.$metadata});var t0=n(29293);let t1=new t0.C("RestApis");var t2=n(14330),t3=n(74172);let t4="execute-api",t9=/^.+\.([a-z0-9-]+)\.([a-z0-9-]+)\.amazonaws\.com/;var t6=n(44431),t8=n(52899),t5=n(99467);let t7=e=>Object.keys(e).map(e=>e.toLowerCase()).sort().join(";"),ne="aws4_request",nt="AWS4-HMAC-SHA256";var nn=n(86890),nr=n(68021);let ni=(e,t)=>{let n=new nn.I(e??void 0);return n.update(t),n.digestSync()},no=(e,t)=>{let n=ni(e,t);return(0,nr.n)(n)},ns=e=>encodeURIComponent(e).replace(/[!'()*]/g,na),na=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,nc=e=>"function"==typeof ArrayBuffer&&e instanceof ArrayBuffer||"[object ArrayBuffer]"===Object.prototype.toString.call(e),nl=(e,t)=>{let n=(({credentials:e,signingDate:t=new Date,signingRegion:n,signingService:r,uriEscapePath:i=!0})=>{let{accessKeyId:o,secretAccessKey:s,sessionToken:a}=e,{longDate:c,shortDate:l}=(e=>{let t=e.toISOString().replace(/[:-]|\.\d{3}/g,"");return{longDate:t,shortDate:t.slice(0,8)}})(t);return{accessKeyId:o,credentialScope:`${l}/${n}/${r}/${ne}`,longDate:c,secretAccessKey:s,sessionToken:a,shortDate:l,signingRegion:n,signingService:r,uriEscapePath:i}})(t),{accessKeyId:r,credentialScope:i,longDate:o,sessionToken:s}=n,a={...e.headers};a.host=e.url.host,a["x-amz-date"]=o,s&&(a["x-amz-security-token"]=s);let c={...e,headers:a},l=((e,{credentialScope:t,longDate:n,secretAccessKey:r,shortDate:i,signingRegion:o,signingService:s,uriEscapePath:a})=>{let c=(({body:e,headers:t,method:n,url:r},i=!0)=>[n,((e,t=!0)=>e?t?encodeURIComponent(e).replace(/%2F/g,"/"):e:"/")(r.pathname,i),Array.from(r.searchParams).sort(([e,t],[n,r])=>e===n?t<r?-1:1:e<n?-1:1).map(([e,t])=>`${ns(e)}=${ns(t)}`).join("&"),Object.entries(t).map(([e,t])=>({key:e.toLowerCase(),value:t?.trim().replace(/\s+/g," ")??""})).sort((e,t)=>e.key<t.key?-1:1).map(e=>`${e.key}:${e.value}
`).join(""),t7(t),(e=>null==e?"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855":(e=>"string"==typeof e||ArrayBuffer.isView(e)||nc(e))(e)?no(null,e):"UNSIGNED-PAYLOAD")(e)].join("\n"))(e,a),l=[nt,n,t,no(null,c)].join("\n");return no(((e,t,n,r)=>{let i=ni(`AWS4${e}`,t),o=ni(i,n),s=ni(o,r);return ni(s,ne)})(r,i,o,s),l)})(c,n),u=`Credential=${r}/${i}`,p=`SignedHeaders=${t7(a)}`,d=`Signature=${l}`;return a.authorization=`${nt} ${u}, ${p}, ${d}`,c},nu=e=>new Date(Date.now()+e);var np=n(82590);let nd=(0,np.q)(t6.Q,[t8.L,t5.b,({credentials:e,region:t,service:n,uriEscapePath:r=!0})=>{let i;return(o,s)=>async function(a){var c,l;i=i??0;let u={credentials:"function"==typeof e?await e({forceRefresh:!!s?.isCredentialsExpired}):e,signingDate:nu(i),signingRegion:t,signingService:n,uriEscapePath:r},p=await nl(a,u),d=await o(p),h=(({headers:e}={})=>e?.date??e?.Date??e?.["x-amz-date"])(d);return h&&(c=Date.parse(h),i=Math.abs(nu(l=i).getTime()-c)>=3e5?c-Date.now():l),d}}]),nh=(0,np.q)(t6.Q,[t8.L,t5.b]),nf=async(e,t,n,r)=>{let i,{url:o,method:s,headers:a,body:c,withCredentials:l,abortSignal:u,retryStrategy:p}=t,d=c?c instanceof FormData?c:JSON.stringify(c??""):void 0,h={url:o,headers:((e,t)=>{let n={};for(let t in e)n[t.toLowerCase()]=e[t];if(t){let e=n["content-type"];e&&(e.startsWith("application/json")||e.startsWith("application/")&&e.includes("+json"))||(n["content-type"]="application/json; charset=UTF-8"),t instanceof FormData&&delete n["content-type"]}return n})(a,c),method:s,body:d},f={retryDecider:ny(p??e?.libraryOptions?.API?.REST?.retryStrategy),computeDelay:t2.y,withCrossDomainCredentials:l,abortSignal:u},y=n(h,r),m=await nm(e);if(y&&m){let e=((e,t)=>{let{service:n=t4,region:r="us-east-1"}=t?.amplify.getConfig()?.API?.REST?.[t?.apiName]??{},{hostname:i}=e,[,o,s]=t9.exec(i)??[];return o===t4?{service:o,region:s??r}:"appsync-api"===o?{service:"appsync",region:s??r}:{service:n,region:r}})(o),t=r?.service??e.service,n=r?.region??e.region;i=await nd(h,{...f,credentials:m,region:n,service:t})}else i=await nh(h,{...f});return{statusCode:i.statusCode,headers:i.headers,body:i.body}},ny=e=>"no-retry"===e?.strategy?()=>Promise.resolve({retryable:!1}):(0,t3.D)(tH),nm=async e=>{try{let{credentials:t}=await e.Auth.fetchAuthSession();if(t)return t}catch(e){t1.debug("No credentials available, the request will be unsigned.")}return null},nv=({headers:e},t)=>!e.authorization&&!e["x-api-key"]&&!!t,nb=new WeakMap,nE=(e,{url:t,options:n,abortController:r})=>{let i=r??new AbortController,o=(function(e,t){let n,r=new AbortController,i=r.signal,o=t?.signal,s=async()=>{try{let n=await (t?e():e(i));if(n.statusCode>=300)throw await tH(n);return n}catch(r){let e=o??i,t=n??e.reason;if("AbortError"===r.name||e?.aborted===!0){let e=new tW({...t&&{message:t},underlyingError:r,recoverySuggestion:"The API request was explicitly canceled. If this is not intended, validate if you called the `cancel()` function on the API request erroneously."});throw t1.debug(r),e}throw t1.debug(r),r}};return t?s():{response:s(),cancel:e=>{!0!==i.aborted&&(r.abort(e),e&&i.reason!==e&&(n=e))}}})(async()=>nf(e,{url:t,method:"POST",...n,abortSignal:i.signal,retryStrategy:{strategy:"jittered-exponential-backoff"}},nv,n?.signingServiceInfo),i).finally(()=>{nb.delete(o)});return o},ng=(e,t)=>{let n=nb.get(e);return!!n&&(n.abort(t),t&&n.signal.reason!==t&&(n.signal.reason=t),!0)},nT=(e,t)=>{nb.set(e,t)};var nS=n(30029);let nN=[400,401,403],nO=["BadRequestException","UnauthorizedException"];!function(e){e.GQL_CONNECTION_INIT="connection_init",e.GQL_CONNECTION_ERROR="connection_error",e.GQL_CONNECTION_ACK="connection_ack",e.GQL_START="start",e.GQL_START_ACK="start_ack",e.DATA="data",e.GQL_CONNECTION_KEEP_ALIVE="ka",e.GQL_STOP="stop",e.GQL_COMPLETE="complete",e.GQL_ERROR="error",e.EVENT_SUBSCRIBE="subscribe",e.EVENT_PUBLISH="publish",e.EVENT_SUBSCRIBE_ACK="subscribe_success",e.EVENT_PUBLISH_ACK="publish_success",e.EVENT_STOP="unsubscribe",e.EVENT_COMPLETE="unsubscribe_success"}(s||(s={})),function(e){e[e.PENDING=0]="PENDING",e[e.CONNECTED=1]="CONNECTED",e[e.FAILED=2]="FAILED"}(a||(a={})),function(e){e[e.CLOSED=0]="CLOSED",e[e.READY=1]="READY",e[e.CONNECTING=2]="CONNECTING"}(c||(c={}));let nA={accept:"application/json, text/javascript","content-encoding":"amz-1.0","content-type":"application/json; charset=UTF-8"};class n_ extends Error{constructor(){super(...arguments),this.nonRetryable=!0}}var nI=n(62293);let nk=e=>e&&e.nonRetryable;var nw=n(62879),nC=n(43859),nD=n(6072);let nx=new t0.C("retryUtil");async function nR(e,t,n,r){if("function"!=typeof e)throw Error("functionToRetry must be a function");return new Promise(async(i,o)=>{let s,a,c=0,l=!1,u=()=>{};for(r&&r.then(()=>{l=!0,clearTimeout(s),u()});!l;){c++,nx.debug(`${e.name} attempt #${c} with this vars: ${JSON.stringify(t)}`);try{i(await e(...t));return}catch(i){if(a=i,nx.debug(`error on ${e.name}`,i),nk(i)){nx.debug(`${e.name} non retryable error`,i),o(i);return}let r=n(c,t,i);if(nx.debug(`${e.name} retrying in ${r} ms`),!1===r||l)return void o(i);await new Promise(e=>{s=setTimeout(u=e,r)})}}o(a)})}!function(e){e.CONNECTION_CLOSED="Connection closed",e.CONNECTION_FAILED="Connection failed",e.REALTIME_SUBSCRIPTION_INIT_ERROR="AppSync Realtime subscription init error",e.SUBSCRIPTION_ACK="Subscription ack",e.TIMEOUT_DISCONNECT="Timeout disconnect"}(l||(l={})),function(e){e.Connected="Connected",e.ConnectedPendingNetwork="ConnectedPendingNetwork",e.ConnectionDisrupted="ConnectionDisrupted",e.ConnectionDisruptedPendingNetwork="ConnectionDisruptedPendingNetwork",e.Connecting="Connecting",e.ConnectedPendingDisconnect="ConnectedPendingDisconnect",e.Disconnected="Disconnected",e.ConnectedPendingKeepAlive="ConnectedPendingKeepAlive"}(u||(u={}));class nL{networkMonitor(e){let t=(()=>{if("undefined"==typeof self)return!1;let e=self;return void 0!==e.WorkerGlobalScope&&self instanceof e.WorkerGlobalScope})()?self:"undefined"!=typeof window&&window;if(!t)return t$([{online:!0}]);return new eU(e=>{e.next({online:t.navigator.onLine});let n=()=>{e.next({online:!0})},r=()=>{e.next({online:!1})};return t.addEventListener("online",n),t.addEventListener("offline",r),nL._observers.push(e),()=>{t.removeEventListener("online",n),t.removeEventListener("offline",r),nL._observers=nL._observers.filter(t=>t!==e)}})}static _observerOverride(e){for(let t of this._observers){if(t.closed){this._observers=this._observers.filter(e=>e!==t);continue}t?.next&&t.next(e)}}}nL._observers=[];let nP=()=>new nL().networkMonitor(),nM={KEEP_ALIVE_MISSED:{keepAliveState:"unhealthy"},KEEP_ALIVE:{keepAliveState:"healthy"},CONNECTION_ESTABLISHED:{connectionState:"connected"},CONNECTION_FAILED:{intendedConnectionState:"disconnected",connectionState:"disconnected"},CLOSING_CONNECTION:{intendedConnectionState:"disconnected"},OPENING_CONNECTION:{intendedConnectionState:"connected",connectionState:"connecting"},CLOSED:{connectionState:"disconnected"},ONLINE:{networkState:"connected"},OFFLINE:{networkState:"disconnected"}};class nF{constructor(){this._networkMonitoringSubscription=void 0,this._linkedConnectionState={networkState:"connected",connectionState:"disconnected",intendedConnectionState:"disconnected",keepAliveState:"healthy"},this._initialNetworkStateSubscription=nP().subscribe(({online:e})=>{this.record(e?nM.ONLINE:nM.OFFLINE),this._initialNetworkStateSubscription?.unsubscribe()}),this._linkedConnectionStateObservable=new eU(e=>{e.next(this._linkedConnectionState),this._linkedConnectionStateObserver=e})}enableNetworkMonitoring(){this._initialNetworkStateSubscription?.unsubscribe(),void 0===this._networkMonitoringSubscription&&(this._networkMonitoringSubscription=nP().subscribe(({online:e})=>{this.record(e?nM.ONLINE:nM.OFFLINE)}))}disableNetworkMonitoring(){this._networkMonitoringSubscription?.unsubscribe(),this._networkMonitoringSubscription=void 0}get connectionStateObservable(){var e;let t;return this._linkedConnectionStateObservable.pipe(U(e=>this.connectionStatesTranslator(e))).pipe((e=e=>{let n=e!==t;return t=e,n},y(function(t,n){var r=0;t.subscribe(F(n,function(t){return e.call(void 0,t,r++)&&n.next(t)}))})))}record(e){"connected"===e.intendedConnectionState?this.enableNetworkMonitoring():"disconnected"===e.intendedConnectionState&&this.disableNetworkMonitoring();let t={...this._linkedConnectionState,...e};this._linkedConnectionState={...t},this._linkedConnectionStateObserver?.next(this._linkedConnectionState)}connectionStatesTranslator({connectionState:e,networkState:t,intendedConnectionState:n,keepAliveState:r}){return"connected"===e&&"disconnected"===t?u.ConnectedPendingNetwork:"connected"===e&&"disconnected"===n?u.ConnectedPendingDisconnect:"disconnected"===e&&"connected"===n&&"disconnected"===t?u.ConnectionDisruptedPendingNetwork:"disconnected"===e&&"connected"===n?u.ConnectionDisrupted:"connected"===e&&"unhealthy"===r?u.ConnectedPendingKeepAlive:"connecting"===e?u.Connecting:"disconnected"===e?u.Disconnected:u.Connected}}!function(e){e.START_RECONNECT="START_RECONNECT",e.HALT_RECONNECT="HALT_RECONNECT"}(p||(p={}));class nj{constructor(){this.reconnectObservers=[]}addObserver(e){this.reconnectObservers.push(e)}record(e){e===p.START_RECONNECT&&void 0===this.reconnectSetTimeoutId&&void 0===this.reconnectIntervalId&&(this.reconnectSetTimeoutId=setTimeout(()=>{this._triggerReconnect(),this.reconnectIntervalId=setInterval(()=>{this._triggerReconnect()},6e4)},5e3)),e===p.HALT_RECONNECT&&(this.reconnectIntervalId&&(clearInterval(this.reconnectIntervalId),this.reconnectIntervalId=void 0),this.reconnectSetTimeoutId&&(clearTimeout(this.reconnectSetTimeoutId),this.reconnectSetTimeoutId=void 0))}close(){this.reconnectObservers.forEach(e=>{e.complete?.()})}_triggerReconnect(){this.reconnectObservers.forEach(e=>{e.next?.()})}}let nU="wss://",n$=/^https:\/\/\w{26}\.appsync-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/graphql$/i,nK=/^https:\/\/\w{26}\.\w+-api\.\w{2}(?:(?:-\w{2,})+)-\d\.amazonaws.com(?:\.cn)?\/event$/i,nB="/realtime",nV=async e=>{let{appSyncGraphqlEndpoint:t,query:n,libraryConfigHeaders:r=()=>({}),additionalHeaders:i={},authToken:o}=e,s={},a=await r();return s="function"==typeof i?await i({url:t||"",queryString:n||""}):i,o&&(s={...s,Authorization:o}),{additionalCustomHeaders:s,libraryConfigHeaders:a}};var nG=n(53732);let nq=new t0.C("AWSAppSyncRealTimeProvider Auth"),nY=async({host:e})=>{let t=await (0,nG.$)();return{Authorization:t?.tokens?.accessToken?.toString(),host:e}},nQ=async({apiKey:e,host:t})=>({host:t,"x-amz-date":new Date().toISOString().replace(/[:-]|\.\d{3}/g,""),"x-api-key":e}),nW=async({payload:e,canonicalUri:t,appSyncGraphqlEndpoint:n,region:r})=>{let i={region:r,service:"appsync"},o=(await (0,nG.$)()).credentials,s={url:`${n}${t}`,data:e,method:"POST",headers:{...nA}};return nl({headers:s.headers,method:s.method,url:new tB.o(s.url),body:s.data},{credentials:o,signingRegion:i.region,signingService:i.service}).headers},nJ=async({host:e,additionalCustomHeaders:t})=>{if(!t?.Authorization)throw Error("No auth token specified");return{Authorization:t.Authorization,host:e}},nz=async({apiKey:e,authenticationType:t,canonicalUri:n,appSyncGraphqlEndpoint:r,region:i,additionalCustomHeaders:o,payload:s})=>{let a={apiKey:nQ,iam:nW,oidc:nY,userPool:nY,lambda:nJ,none:nJ};if(!t||!a[t])return void nq.debug(`Authentication type ${t} not supported`);{let c=a[t],l=r?new tB.o(r).host:void 0;return nq.debug(`Authenticating with ${JSON.stringify(t)}`),await c({payload:s,canonicalUri:n,appSyncGraphqlEndpoint:r,apiKey:"apiKey"===t?e:void 0,region:i,host:l,additionalCustomHeaders:o})}},nH=e=>{h.YZ.dispatch("api",e,"PubSub",h.U9)};class nX{constructor(e){this.subscriptionObserverMap=new Map,this.allowNoSubscriptions=!1,this.socketStatus=c.CLOSED,this.keepAliveTimestamp=Date.now(),this.promiseArray=[],this.connectionStateMonitor=new nF,this.reconnectionMonitor=new nj,this._establishConnection=async(e,t)=>{this.logger.debug(`Establishing WebSocket connection to ${e}`);try{await this._openConnection(e,t),await this._initiateHandshake()}catch(n){let{errorType:e,errorCode:t}=n;if(nN.includes(t)||nO.includes(e))throw new n_(e);if(e)throw Error(e);throw n}},this.logger=new t0.C(e.providerName),this.wsProtocolName=e.wsProtocolName,this.wsConnectUri=e.connectUri,this.connectionStateMonitorSubscription=this._startConnectionStateMonitoring()}close(){return this.socketStatus=c.CLOSED,this.connectionStateMonitor.record(nM.CONNECTION_FAILED),this.connectionStateMonitorSubscription.unsubscribe(),this.reconnectionMonitor.close(),new Promise((e,t)=>{this.awsRealTimeSocket?(this.awsRealTimeSocket.onclose=t=>{this._closeSocket(),this.subscriptionObserverMap=new Map,this.awsRealTimeSocket=void 0,e()},this.awsRealTimeSocket.onerror=e=>{t(e)},this.awsRealTimeSocket.close()):e()})}subscribe(e,t){return new eU(n=>{if(!e?.appSyncGraphqlEndpoint){n.error({errors:[{...new ti("Subscribe only available for AWS AppSync endpoint")}]}),n.complete();return}let r=!1,i=(0,nI.G)(),o=()=>{r||(r=!0,this._startSubscriptionWithAWSAppSyncRealTime({options:e,observer:n,subscriptionId:i,customUserAgentDetails:t}).catch(e=>{this.logger.debug(`${l.REALTIME_SUBSCRIPTION_INIT_ERROR}: ${e}`),this._closeSocket()}).finally(()=>{r=!1}))},s=new eU(e=>{this.reconnectionMonitor.addObserver(e)}).subscribe(()=>{o()});return o(),async()=>{await this._cleanupSubscription(i,s)}})}async connect(e){this.socketStatus!==c.READY&&await this._connectWebSocket(e)}async publish(e,t){if(this.socketStatus!==c.READY)throw Error("Subscription has not been initialized");return this._publishMessage(e,t)}async _connectWebSocket(e){let{apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i}=e,{additionalCustomHeaders:o}=await nV(e);this.connectionStateMonitor.record(nM.OPENING_CONNECTION),await this._initializeWebSocketConnection({apiKey:t,appSyncGraphqlEndpoint:n,authenticationType:r,region:i,additionalCustomHeaders:o})}async _publishMessage(e,t){let n=(0,nI.G)(),{additionalCustomHeaders:r,libraryConfigHeaders:i}=await nV(e),o=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:t,additionalCustomHeaders:r,libraryConfigHeaders:i,publish:!0});return new Promise((e,t)=>{if(this.awsRealTimeSocket){let r=i=>{let o=JSON.parse(i.data);if(o.id===n&&"publish_success"===o.type&&(this.awsRealTimeSocket&&this.awsRealTimeSocket.removeEventListener("message",r),a(),e()),o.errors&&o.errors.length>0){let e=o.errors.map(e=>e.errorType);a(),t(Error(`Publish errors: ${e.join(", ")}`))}},i=e=>{a(),t(Error(`WebSocket error: ${e}`))},s=()=>{a(),t(Error("WebSocket is closed"))},a=()=>{this.awsRealTimeSocket?.removeEventListener("message",r),this.awsRealTimeSocket?.removeEventListener("error",i),this.awsRealTimeSocket?.removeEventListener("close",s)};this.awsRealTimeSocket.addEventListener("message",r),this.awsRealTimeSocket.addEventListener("error",i),this.awsRealTimeSocket.addEventListener("close",s),this.awsRealTimeSocket.send(o)}else t(Error("WebSocket is not connected"))})}async _cleanupSubscription(e,t){t?.unsubscribe();try{await this._waitForSubscriptionToBeConnected(e);let{subscriptionState:t}=this.subscriptionObserverMap.get(e)||{};if(!t)return;if(t===a.CONNECTED)this._sendUnsubscriptionMessage(e);else throw Error("Subscription never connected")}catch(e){this.logger.debug(`Error while unsubscribing ${e}`)}finally{this._removeSubscriptionObserver(e)}}_startConnectionStateMonitoring(){return this.connectionStateMonitor.connectionStateObservable.subscribe(e=>{nH({event:"ConnectionStateChange",data:{provider:this,connectionState:e},message:`Connection state is ${e}`}),this.connectionState=e,e===u.ConnectionDisrupted&&this.reconnectionMonitor.record(p.START_RECONNECT),[u.Connected,u.ConnectedPendingDisconnect,u.ConnectedPendingKeepAlive,u.ConnectedPendingNetwork,u.ConnectionDisruptedPendingNetwork,u.Disconnected].includes(e)&&this.reconnectionMonitor.record(p.HALT_RECONNECT)})}async _startSubscriptionWithAWSAppSyncRealTime({options:e,observer:t,subscriptionId:n,customUserAgentDetails:r}){let{query:i,variables:o}=e;this.subscriptionObserverMap.set(n,{observer:t,query:i??"",variables:o??{},subscriptionState:a.PENDING,startAckTimeoutId:void 0});let{additionalCustomHeaders:s,libraryConfigHeaders:c}=await nV(e),l=await this._prepareSubscriptionPayload({options:e,subscriptionId:n,customUserAgentDetails:r,additionalCustomHeaders:s,libraryConfigHeaders:c});try{await this._connectWebSocket(e)}catch(e){this._logStartSubscriptionError(n,t,e);return}let{subscriptionFailedCallback:u,subscriptionReadyCallback:p}=this.subscriptionObserverMap.get(n)??{};this.subscriptionObserverMap.set(n,{observer:t,subscriptionState:a.PENDING,query:i??"",variables:o??{},subscriptionReadyCallback:p,subscriptionFailedCallback:u,startAckTimeoutId:setTimeout(()=>{this._timeoutStartSubscriptionAck(n)},15e3)}),this.awsRealTimeSocket&&this.awsRealTimeSocket.send(l)}_logStartSubscriptionError(e,t,n){this.logger.debug({err:n});let r=String(n.message??"");if(this._closeSocket(),this.connectionState!==u.ConnectionDisruptedPendingNetwork){nk(n)?t.error({errors:[{...new ti(`${l.CONNECTION_FAILED}: ${r}`)}]}):this.logger.debug(`${l.CONNECTION_FAILED}: ${r}`);let{subscriptionFailedCallback:i}=this.subscriptionObserverMap.get(e)||{};"function"==typeof i&&i()}}async _waitForSubscriptionToBeConnected(e){let t=this.subscriptionObserverMap.get(e);if(t){let{subscriptionState:n}=t;if(n===a.PENDING)return new Promise((n,r)=>{let{observer:i,subscriptionState:o,variables:s,query:a}=t;this.subscriptionObserverMap.set(e,{observer:i,subscriptionState:o,variables:s,query:a,subscriptionReadyCallback:n,subscriptionFailedCallback:r})})}}_sendUnsubscriptionMessage(e){try{if(this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.socketStatus===c.READY){let t=this._unsubscribeMessage(e),n=JSON.stringify(t);this.awsRealTimeSocket.send(n)}}catch(e){this.logger.debug({err:e})}}_removeSubscriptionObserver(e){this.subscriptionObserverMap.delete(e),this.allowNoSubscriptions||setTimeout(this._closeSocketIfRequired.bind(this),1e3)}_closeSocketIfRequired(){if(!(this.subscriptionObserverMap.size>0)){if(!this.awsRealTimeSocket){this.socketStatus=c.CLOSED;return}if(this.connectionStateMonitor.record(nM.CLOSING_CONNECTION),this.awsRealTimeSocket.bufferedAmount>0)setTimeout(this._closeSocketIfRequired.bind(this),1e3);else{this.logger.debug("closing WebSocket...");let e=this.awsRealTimeSocket;e.onclose=null,e.onerror=null,e.close(1e3),this.awsRealTimeSocket=void 0,this.socketStatus=c.CLOSED,this._closeSocket()}}}maintainKeepAlive(){this.keepAliveTimestamp=Date.now()}keepAliveHeartbeat(e){let t=Date.now();t-this.keepAliveTimestamp>65e3?this.connectionStateMonitor.record(nM.KEEP_ALIVE_MISSED):this.connectionStateMonitor.record(nM.KEEP_ALIVE),t-this.keepAliveTimestamp>e&&this._errorDisconnect(l.TIMEOUT_DISCONNECT)}_handleIncomingSubscriptionMessage(e){if("string"!=typeof e.data)return;let[t,n]=this._handleSubscriptionData(e);if(t)return void this.maintainKeepAlive();let{type:r,id:i,payload:o}=n,{observer:c=null,query:u="",variables:p={},startAckTimeoutId:d,subscriptionReadyCallback:h,subscriptionFailedCallback:f}=this.subscriptionObserverMap.get(i)||{};if(r===s.GQL_START_ACK||r===s.EVENT_SUBSCRIBE_ACK){this.logger.debug(`subscription ready for ${JSON.stringify({query:u,variables:p})}`),"function"==typeof h&&h(),d&&clearTimeout(d),nH({event:l.SUBSCRIPTION_ACK,data:{query:u,variables:p},message:"Connection established for subscription"});let e=a.CONNECTED;c&&this.subscriptionObserverMap.set(i,{observer:c,query:u,variables:p,startAckTimeoutId:void 0,subscriptionState:e,subscriptionReadyCallback:h,subscriptionFailedCallback:f}),this.connectionStateMonitor.record(nM.CONNECTION_ESTABLISHED);return}if(r===s.GQL_CONNECTION_KEEP_ALIVE)return void this.maintainKeepAlive();if(r===s.GQL_ERROR){let e=a.FAILED;c&&(this.subscriptionObserverMap.set(i,{observer:c,query:u,variables:p,startAckTimeoutId:d,subscriptionReadyCallback:h,subscriptionFailedCallback:f,subscriptionState:e}),this.logger.debug(`${l.CONNECTION_FAILED}: ${JSON.stringify(o??n)}`),c.error({errors:[{...new ti(`${l.CONNECTION_FAILED}: ${JSON.stringify(o??n)}`)}]}),d&&clearTimeout(d),"function"==typeof f&&f())}}_errorDisconnect(e){this.logger.debug(`Disconnect error: ${e}`),this.awsRealTimeSocket&&(this._closeSocket(),this.awsRealTimeSocket.close()),this.socketStatus=c.CLOSED}_closeSocket(){this.keepAliveHeartbeatIntervalId&&(clearInterval(this.keepAliveHeartbeatIntervalId),this.keepAliveHeartbeatIntervalId=void 0),this.connectionStateMonitor.record(nM.CLOSED)}_timeoutStartSubscriptionAck(e){let t=this.subscriptionObserverMap.get(e);if(t){let{observer:n,query:r,variables:i}=t;if(!n)return;this.subscriptionObserverMap.set(e,{observer:n,query:r,variables:i,subscriptionState:a.FAILED}),this._closeSocket(),this.logger.debug("timeoutStartSubscription",JSON.stringify({query:r,variables:i}))}}_initializeWebSocketConnection({appSyncGraphqlEndpoint:e,authenticationType:t,apiKey:n,region:r,additionalCustomHeaders:i}){if(this.socketStatus!==c.READY)return new Promise(async(o,s)=>{if(this.promiseArray.push({res:o,rej:s}),this.socketStatus===c.CLOSED)try{this.socketStatus=c.CONNECTING;let o=await nz({authenticationType:t,payload:"{}",canonicalUri:this.wsConnectUri,apiKey:n,appSyncGraphqlEndpoint:e,region:r,additionalCustomHeaders:i}),s=o?JSON.stringify(o):"",a=nw.Y.convert(s,{urlSafe:!0,skipPadding:!0}),l=`header-${a}`,u=(e=>{let t=(e=>{if(!e)return{};if("Authorization"in e){let{Authorization:t,...n}=e;return n}return e})(e),n=new tB.g;return Object.entries(t).forEach(([e,t])=>{n.append(e,t)}),n})(i),p=((e,t)=>{let n,r=(n=e??"",n=(n=null!==n.match(nK)?n.concat(nB).replace("ddpg-api","grt-gamma").replace("appsync-api","appsync-realtime-api"):null===n.match(n$)?n.concat(nB):n.replace("appsync-api","appsync-realtime-api").replace("gogi-beta","grt-beta").replace("ddpg-api","grt-gamma")).replace("https://",nU).replace("http://",nU),new tB.o(n)),i=new tB.g(r.search);for(let[e,n]of t.entries())i.append(e,n);return r.search=i.toString(),r.toString()})(e,u);await this._establishRetryableConnection(p,l),this.promiseArray.forEach(({res:e})=>{this.logger.debug("Notifying connection successful"),e()}),this.socketStatus=c.READY,this.promiseArray=[]}catch(e){this.logger.debug("Connection exited with",e),this.promiseArray.forEach(({rej:t})=>{t(e)}),this.promiseArray=[],this.awsRealTimeSocket&&this.awsRealTimeSocket.readyState===WebSocket.OPEN&&this.awsRealTimeSocket.close(3001),this.awsRealTimeSocket=void 0,this.socketStatus=c.CLOSED}})}async _establishRetryableConnection(e,t){this.logger.debug("Establishing retryable connection"),await ((e,t,n=nC.M,r)=>nR(e,t,(0,nD.y)(n),r))(this._establishConnection.bind(this),[e,t],5e3)}async _openConnection(e,t){return new Promise((n,r)=>{let i=this._getNewWebSocket(e,[this.wsProtocolName,t]);i.onerror=()=>{this.logger.debug("WebSocket connection error")},i.onclose=()=>{this._closeSocket(),r(Error("Connection handshake error"))},i.onopen=()=>{this.awsRealTimeSocket=i,n()}})}_getNewWebSocket(e,t){return new WebSocket(e,t)}async _initiateHandshake(){return new Promise((e,t)=>{if(!this.awsRealTimeSocket)return void t(Error("awsRealTimeSocket undefined"));let n=!1;this.awsRealTimeSocket.onerror=e=>{this.logger.debug(`WebSocket error ${JSON.stringify(e)}`)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),t(Error(JSON.stringify(e)))},this.awsRealTimeSocket.onmessage=r=>{if("string"!=typeof r.data)return;this.logger.debug(`subscription message from AWS AppSyncRealTime: ${r.data} `);let i=JSON.parse(r.data),{type:o}=i,a=this._extractConnectionTimeout(i);if(o===s.GQL_CONNECTION_ACK){n=!0,this._registerWebsocketHandlers(a),e("Connected to AWS AppSyncRealTime");return}if(o===s.GQL_CONNECTION_ERROR){let{errorType:e,errorCode:n}=this._extractErrorCodeAndType(i);t({errorType:e,errorCode:n})}};let r={type:s.GQL_CONNECTION_INIT};this.awsRealTimeSocket.send(JSON.stringify(r));let i=e=>{e||(this.connectionStateMonitor.record(nM.CONNECTION_FAILED),t(Error("Connection timeout: ack from AWSAppSyncRealTime was not received after 15000 ms")))};setTimeout(()=>{i(n)},15e3)})}_registerWebsocketHandlers(e){this.awsRealTimeSocket&&(this.keepAliveHeartbeatIntervalId=setInterval(()=>{this.keepAliveHeartbeat(e)},5e3),this.awsRealTimeSocket.onmessage=this._handleIncomingSubscriptionMessage.bind(this),this.awsRealTimeSocket.onerror=e=>{this.logger.debug(e),this._errorDisconnect(l.CONNECTION_CLOSED)},this.awsRealTimeSocket.onclose=e=>{this.logger.debug(`WebSocket closed ${e.reason}`),this._closeSocket(),this._errorDisconnect(l.CONNECTION_CLOSED)})}}let nZ="AWSAppSyncRealTimeProvider";class n0 extends nX{constructor(){super({providerName:nZ,wsProtocolName:"graphql-ws",connectUri:"/connect"})}getProviderName(){return nZ}subscribe(e,t){return super.subscribe(e,t)}async _prepareSubscriptionPayload({options:e,subscriptionId:t,customUserAgentDetails:n,additionalCustomHeaders:r,libraryConfigHeaders:i}){let{appSyncGraphqlEndpoint:o,authenticationType:a,query:c,variables:l,apiKey:u,region:p}=e,d=JSON.stringify({query:c,variables:l}),h={...await nz({apiKey:u,appSyncGraphqlEndpoint:o,authenticationType:a,payload:d,canonicalUri:"",region:p,additionalCustomHeaders:r}),...i,...r,[nS.YJ]:(0,tV.fE)(n)};return JSON.stringify({id:t,payload:{data:d,extensions:{authorization:{...h}}},type:s.GQL_START})}_handleSubscriptionData(e){this.logger.debug(`subscription message from AWS AppSync RealTime: ${e.data}`);let{id:t="",payload:n,type:r}=JSON.parse(String(e.data)),{observer:i=null,query:o="",variables:a={}}=this.subscriptionObserverMap.get(t)||{};return(this.logger.debug({id:t,observer:i,query:o,variables:a}),r===s.DATA&&n&&n.data)?(i?i.next(n):this.logger.debug(`observer not found for id: ${t}`),[!0,{id:t,type:r,payload:n}]):[!1,{id:t,type:r,payload:n}]}_unsubscribeMessage(e){return{id:e,type:s.GQL_STOP}}_extractConnectionTimeout(e){let{payload:{connectionTimeoutMs:t=3e5}={}}=e;return t}_extractErrorCodeAndType(e){let{payload:{errors:[{errorType:t="",errorCode:n=0}={}]=[]}={}}=e;return{errorCode:n,errorType:t}}}class n1 extends tG.x{constructor(e){super(e),this.constructor=n1,Object.setPrototypeOf(this,n1.prototype)}}!function(e){e.NoAuthSession="NoAuthSession",e.NoRegion="NoRegion",e.NoCustomEndpoint="NoCustomEndpoint"}(d||(d={}));let n2={[d.NoAuthSession]:{message:"Auth session should not be empty."},[d.NoRegion]:{message:"Missing region."},[d.NoCustomEndpoint]:{message:"Custom endpoint region is present without custom endpoint."}},n3=new t0.C("GraphQLAPI resolveConfig"),n4=e=>{let t=e.getConfig();t.API?.GraphQL||n3.warn("The API configuration is missing. This is likely due to Amplify.configure() not being called prior to generateClient().");let{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}=t.API?.GraphQL??{};return!function(e,t){let{message:n,recoverySuggestion:r}=n2[t];if(!e)throw new n1({name:t,message:n,recoverySuggestion:r})}(!(!r&&i),d.NoCustomEndpoint),{apiKey:n,customEndpoint:r,customEndpointRegion:i,defaultAuthMode:o,endpoint:s,region:a}},n9=e=>({headers:e.libraryOptions?.API?.GraphQL?.headers,withCredentials:e.libraryOptions?.API?.GraphQL?.withCredentials});function n6(e){return e.errors&&Array.isArray(e.errors)&&e.errors.forEach(e=>{var t;t=e,(t?.originalError?.name?.startsWith("UnauthorizedException")||t.message?.startsWith("Connection failed:")&&t.message?.includes("Permission denied"))&&(e.message="Unauthorized",e.recoverySuggestion="If you're calling an Amplify-generated API, make sure to set the \"authMode\" in generateClient({ authMode: '...' }) to the backend authorization rule's auth provider ('apiKey', 'userPool', 'iam', 'oidc', 'lambda')")}),e}let n8={name:"NoApiKey",message:i.NO_API_KEY,recoverySuggestion:'The API request was made with `authMode: "apiKey"` but no API Key was passed into `Amplify.configure()`. Review if your API key is passed into the `Amplify.configure()` function.'},n5={name:"NoCredentials",message:i.NO_CREDENTIALS,recoverySuggestion:`The API request was made with \`authMode: "iam"\` but no authentication credentials are available.

If you intended to make a request using an authenticated role, review if your user is signed in before making the request.

If you intend to make a request using an unauthenticated role or also known as "guest access", verify if "Auth.Cognito.allowGuestAccess" is set to "true" in the \`Amplify.configure()\` function.`},n7={name:"NoValidAuthTokens",message:i.NO_FEDERATED_JWT,recoverySuggestion:"If you intended to make an authenticated API request, review if the current user is signed in."},re={name:"NoSignedUser",message:i.NO_CURRENT_USER,recoverySuggestion:"Review the underlying exception field for more details. If you intended to make an authenticated API request, review if the current user is signed in."},rt={name:"NoAuthorizationHeader",message:i.NO_AUTH_TOKEN,recoverySuggestion:'The API request was made with `authMode: "lambda"` but no `authToken` is set. Review if a valid authToken is passed into the request options or in the `Amplify.configure()` function.'},rn={name:"NoEndpoint",message:"No GraphQL endpoint configured in `Amplify.configure()`.",recoverySuggestion:"Review if the GraphQL API endpoint is set in the `Amplify.configure()` function."},rr=e=>({data:{},errors:[new ti(e.message,null,null,null,null,e)]});async function ri(e,t,n,r={}){let i={};switch(t){case"apiKey":if(!n)throw new n1(n8);i={"X-Api-Key":n};break;case"iam":if(void 0===(await e.Auth.fetchAuthSession()).credentials)throw new n1(n5);break;case"oidc":case"userPool":{let t;try{t=(await e.Auth.fetchAuthSession()).tokens?.accessToken.toString()}catch(e){throw new n1({...re,underlyingError:e})}if(!t)throw new n1(n7);i={Authorization:t};break}case"lambda":if("object"==typeof r&&!r.Authorization)throw new n1(rt);i={Authorization:r.Authorization}}return i}class ro{constructor(){this.appSyncRealTime=new Map,this._api={post:nE,cancelREST:ng,isCancelErrorREST:tJ,updateRequestToBeCancellable:nT}}getModuleName(){return"InternalGraphQLAPI"}getGraphqlOperationType(e){let[{operation:t}]=tO(e).definitions;return t}graphql(e,{query:t,variables:n={},authMode:r,authToken:i,endpoint:o,apiKey:s},a,c){let l="string"==typeof t?tO(t):tO(tC(t)),[u={}]=l.definitions.filter(e=>"OperationDefinition"===e.kind),{operation:p}=u,d=a||{};switch(p){case"query":case"mutation":{let t,a=new AbortController;return t="function"!=typeof e?this._graphql(e,{query:l,variables:n,authMode:r,apiKey:s,endpoint:o},d,a,c,i):e(async e=>await this._graphql(e,{query:l,variables:n,authMode:r,apiKey:s,endpoint:o},d,a,c,i)),this._api.updateRequestToBeCancellable(t,a),t}case"subscription":return this._graphqlSubscribe(e,{query:l,variables:n,authMode:r,apiKey:s,endpoint:o},d,c,i);default:throw Error(`invalid operation type: ${p}`)}}async _graphql(e,{query:t,variables:n,authMode:r,endpoint:i,apiKey:o},s={},a,c,l){var u;let p,d,h,{apiKey:f,region:y,endpoint:m,customEndpoint:v,customEndpointRegion:b,defaultAuthMode:E}=n4(e),g=r||E||"iam",T="identityPool"===g?"iam":g,{headers:S,withCredentials:N}=n9(e);if("function"==typeof s){let e={method:"POST",url:new tB.o(i||v||m||"").toString(),queryString:tC(t)};p=await s(e)}else p=s;l&&(p={...p,Authorization:l});let O=await ri(e,T,o??f,p),A={...!v&&O,...v&&(b?O:{})||{},...S&&await S({query:tC(t),variables:n}),...p,...!v&&{"x-amz-user-agent":(0,tV.fE)(c)}},_={query:tC(t),variables:n||null};d=v&&!b||"oidc"!==T&&"userPool"!==T&&"iam"!==T&&"lambda"!==T?void 0:{service:b?"execute-api":"appsync",region:b||y};let I=i||v||m;if(!I)throw rr(new n1(rn));try{let{body:t}=await this._api.post(e,{url:new tB.o(I),options:{headers:A,body:_,signingServiceInfo:d,withCredentials:N},abortController:a});h=await t.json()}catch(e){if(this.isCancelError(e))throw e;h=rr(e)}if((u=h)&&Array.isArray(u.errors)&&u.errors.length>0)throw n6(h);return h}isCancelError(e){return this._api.isCancelErrorREST(e)}cancel(e,t){return this._api.cancelREST(e,t)}_graphqlSubscribe(e,{query:t,variables:n,authMode:r,apiKey:i,endpoint:o},s={},a,c){let l=n4(e),u=r||l?.defaultAuthMode||"iam",{headers:p}=n9(e),d=o??l?.endpoint,h=d??"none",f=this.appSyncRealTime.get(h)??new n0;return this.appSyncRealTime.set(h,f),f.subscribe({query:tC(t),variables:n,appSyncGraphqlEndpoint:d,region:l?.region,authenticationType:"identityPool"===u?"iam":u,apiKey:i??l?.apiKey,additionalHeaders:s,authToken:c,libraryConfigHeaders:p},a).pipe(function e(t){return y(function(n,r){var i,o=null,s=!1;o=n.subscribe(F(r,void 0,void 0,function(a){i=t$(t(a,e(t)(n))),o?(o.unsubscribe(),o=null,i.subscribe(r)):s=!0})),s&&(o.unsubscribe(),o=null,i.subscribe(r))})}(e=>{if(e.errors)throw n6(e);throw e}))}}new ro;class rs extends ro{getModuleName(){return"GraphQLAPI"}graphql(e,t,n){let r={category:eX.b7.API,action:eX.Fu.GraphQl};if(ec in t){let{[ec]:i,...o}=t;return super.graphql(e,o,n,{...r,...i})}return super.graphql(e,t,n,{...r})}isCancelError(e){return super.isCancelError(e)}cancel(e,t){return super.cancel(e,t)}}let ra=new rs;function rc(e,t){let n=eH(this),r=n.endpoint,i=n.authMode,o=n.apiKey;if(e.authMode=e.authMode||i,e.apiKey=e.apiKey??o,e.authToken=e.authToken||n.authToken,r&&"apiKey"===e.authMode&&!e.apiKey)throw Error("graphql() requires an explicit `apiKey` for a custom `endpoint` when `authMode = 'apiKey'`.");let s=t||n.headers;return ra.graphql(n.amplify,{...e,endpoint:r},s)}function rl(e,t){return ra.cancel(e,t)}function ru(e){return ra.isCancelError(e)}let rp=new Proxy({},{get(){throw Error("Client could not be generated. This is likely due to `Amplify.configure()` not being called prior to `generateClient()` or because the configuration passed to `Amplify.configure()` is missing GraphQL provider configuration.")}});var rd=n(36035);function rh(e){var t,n={...e||{},amplify:rd.H};let r={[eq]:n.amplify,[eY]:n.authMode,[eQ]:n.authToken,[eW]:"apiKey"in n?n.apiKey:void 0,[ez]:"endpoint"in n?n.endpoint:void 0,[eJ]:n.headers,graphql:rc,cancel:rl,isCancelError:ru,models:rp,enums:rp,queries:rp,mutations:rp,subscriptions:rp},i=n.amplify.getConfig().API?.GraphQL;if(r[ez]){if(!r[eY])throw Error("generateClient() requires an explicit `authMode` when `endpoint` is provided.");if("apiKey"===r[eY]&&!r[eW])throw Error("generateClient() requires an explicit `apiKey` when `endpoint` is provided and `authMode = 'apiKey'`.")}if(!r[ez])if(void 0!==i)eG(r,i,eH);else{t=r,h.YZ.listen("core",e=>{if("configure"!==e.payload.event)return;let n=e.payload.data.API?.GraphQL;void 0!==n&&eG(t,n,eH)})}return r}}}]);