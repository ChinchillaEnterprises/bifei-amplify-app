(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[186],{21225:(e,s,t)=>{Promise.resolve().then(t.bind(t,39309))},39309:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>o});var a=t(95155),l=t(12115),r=t(35695),n=t(82885),i=t(88304),d=t(6874),c=t.n(d);function o(){let e=(0,r.useRouter)(),{user:s,isInGroup:t,loading:d,userGroups:o}=(0,i.A)(),[x,h]=(0,l.useState)("overview"),[m]=(0,l.useState)({totalUsers:512,activeUsers:45,totalOrders:1234,totalRevenue:45678.9,serverStatus:"healthy",databaseSize:"2.3 GB",lastBackup:"2024-01-20 03:00",apiCalls:12456}),[u]=(0,l.useState)([{id:1,name:"John Doe",email:"john@example.com",role:"customer",status:"active"},{id:2,name:"Jane Host",email:"jane@example.com",role:"restaurantHost",status:"active"},{id:3,name:"Bob Admin",email:"bob@example.com",role:"maintenance",status:"active"}]),[p]=(0,l.useState)([{id:1,name:"Kung Pao Chicken",category:"poultry",price:12.99,available:!0},{id:2,name:"Beef and Broccoli",category:"beef",price:14.99,available:!0},{id:3,name:"Spring Rolls",category:"appetizers",price:6.99,available:!1}]);return((0,l.useEffect)(()=>{d||s?d||!s||t("maintenance")||e.push("/"):e.push("/login")},[d,s,t,e]),d)?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-red-900 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}):s&&t("maintenance")?(0,a.jsxs)("div",{className:"min-h-screen bg-gradient-to-b from-red-50 to-white",children:[(0,a.jsx)(n.A,{}),(0,a.jsx)("div",{className:"bg-gradient-to-r from-gray-900 to-gray-700 py-8",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Maintenance Dashboard"}),(0,a.jsx)("p",{className:"text-yellow-400 mt-2",children:"Full system access and control"}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-white opacity-90",children:["Role: ",o.join(", ")," | Full Access"]})]})}),(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-4 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDFE2"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"System Status"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-600 mt-2",children:m.serverStatus.toUpperCase()})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCBE"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Database Size"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:m.databaseSize})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDCCA"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"API Calls Today"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:m.apiCalls.toLocaleString()})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[(0,a.jsx)("div",{className:"text-3xl mb-2",children:"\uD83D\uDD04"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Last Backup"}),(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900 mt-2",children:m.lastBackup})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,a.jsx)("div",{className:"border-b",children:(0,a.jsxs)("div",{className:"flex overflow-x-auto",children:[(0,a.jsx)("button",{onClick:()=>h("overview"),className:"px-6 py-3 font-semibold transition whitespace-nowrap ".concat("overview"===x?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"Overview"}),(0,a.jsx)("button",{onClick:()=>h("users"),className:"px-6 py-3 font-semibold transition whitespace-nowrap ".concat("users"===x?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"User Management"}),(0,a.jsx)("button",{onClick:()=>h("menu"),className:"px-6 py-3 font-semibold transition whitespace-nowrap ".concat("menu"===x?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"Menu Management"}),(0,a.jsx)("button",{onClick:()=>h("database"),className:"px-6 py-3 font-semibold transition whitespace-nowrap ".concat("database"===x?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"Database"}),(0,a.jsx)("button",{onClick:()=>h("logs"),className:"px-6 py-3 font-semibold transition whitespace-nowrap ".concat("logs"===x?"text-gray-900 border-b-2 border-gray-900":"text-gray-600 hover:text-gray-900"),children:"System Logs"}),(0,a.jsx)(c(),{href:"/admin/host",className:"px-6 py-3 font-semibold text-blue-600 hover:text-blue-800 transition whitespace-nowrap",children:"Host Dashboard →"})]})}),(0,a.jsxs)("div",{className:"p-6",children:["overview"===x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"System Overview"}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Business Metrics"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Users:"}),(0,a.jsx)("span",{className:"font-bold",children:m.totalUsers})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Active Now:"}),(0,a.jsx)("span",{className:"font-bold text-green-600",children:m.activeUsers})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Orders:"}),(0,a.jsx)("span",{className:"font-bold",children:m.totalOrders})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Total Revenue:"}),(0,a.jsxs)("span",{className:"font-bold text-green-600",children:["$",m.totalRevenue.toLocaleString()]})]})]})]}),(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-lg mb-3",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("button",{className:"w-full bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Backup Database"}),(0,a.jsx)("button",{className:"w-full bg-green-600 text-white py-2 rounded hover:bg-green-700",children:"Clear Cache"}),(0,a.jsx)("button",{className:"w-full bg-yellow-600 text-white py-2 rounded hover:bg-yellow-700",children:"Restart Services"}),(0,a.jsx)("button",{className:"w-full bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Emergency Shutdown"})]})]})]})]}),"users"===x&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),(0,a.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add New User"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"ID"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Name"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Email"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Role"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Status"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:u.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.email}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",defaultValue:e.role,children:[(0,a.jsx)("option",{value:"customer",children:"Customer"}),(0,a.jsx)("option",{value:"restaurantHost",children:"Restaurant Host"}),(0,a.jsx)("option",{value:"maintenance",children:"Maintenance"})]})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("span",{className:"px-2 py-1 rounded text-sm font-semibold ".concat("active"===e.status?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.status})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,a.jsx)("button",{className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})})]},e.id))})]})})]}),"menu"===x&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Menu Management"}),(0,a.jsx)("button",{className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"Add Menu Item"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{className:"border-b",children:[(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"ID"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Name"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Category"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Price"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Available"}),(0,a.jsx)("th",{className:"text-left py-2 px-4",children:"Actions"})]})}),(0,a.jsx)("tbody",{children:p.map(e=>(0,a.jsxs)("tr",{className:"border-b hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"py-3 px-4",children:e.id}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.name}),(0,a.jsx)("td",{className:"py-3 px-4",children:e.category}),(0,a.jsxs)("td",{className:"py-3 px-4",children:["$",e.price]}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsx)("input",{type:"checkbox",defaultChecked:e.available})}),(0,a.jsx)("td",{className:"py-3 px-4",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-800 text-sm",children:"Edit"}),(0,a.jsx)("button",{className:"text-red-600 hover:text-red-800 text-sm",children:"Delete"})]})})]},e.id))})]})})]}),"database"===x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Database Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"border rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Database Info"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Type:"}),(0,a.jsx)("span",{children:"DynamoDB"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Size:"}),(0,a.jsx)("span",{children:m.databaseSize})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Tables:"}),(0,a.jsx)("span",{children:"5"})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:"Last Backup:"}),(0,a.jsx)("span",{children:m.lastBackup})]})]})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsx)("button",{className:"bg-blue-600 text-white py-2 rounded hover:bg-blue-700",children:"Create Backup"}),(0,a.jsx)("button",{className:"bg-green-600 text-white py-2 rounded hover:bg-green-700",children:"Restore from Backup"}),(0,a.jsx)("button",{className:"bg-yellow-600 text-white py-2 rounded hover:bg-yellow-700",children:"Optimize Tables"}),(0,a.jsx)("button",{className:"bg-red-600 text-white py-2 rounded hover:bg-red-700",children:"Clear All Data"})]})]})]}),"logs"===x&&(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"System Logs"}),(0,a.jsxs)("div",{className:"bg-gray-900 text-green-400 p-4 rounded font-mono text-sm overflow-x-auto",children:[(0,a.jsx)("div",{children:"[2024-01-20 10:23:45] INFO: User authentication successful"}),(0,a.jsx)("div",{children:"[2024-01-20 10:24:12] INFO: Order #1234 created"}),(0,a.jsx)("div",{children:"[2024-01-20 10:25:03] WARNING: High API usage detected"}),(0,a.jsx)("div",{children:"[2024-01-20 10:26:34] INFO: Database backup completed"}),(0,a.jsx)("div",{children:"[2024-01-20 10:27:56] ERROR: Failed to send email notification"}),(0,a.jsx)("div",{children:"[2024-01-20 10:28:12] INFO: Email service reconnected"}),(0,a.jsx)("div",{children:"[2024-01-20 10:29:45] INFO: New reservation created"}),(0,a.jsx)("div",{children:"[2024-01-20 10:30:22] INFO: Cache cleared successfully"})]}),(0,a.jsxs)("div",{className:"mt-4 flex gap-4",children:[(0,a.jsx)("button",{className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:"Download Logs"}),(0,a.jsx)("button",{className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:"Clear Logs"})]})]})]})]})]})]}):null}},82885:(e,s,t)=>{"use strict";t.d(s,{A:()=>c});var a=t(95155),l=t(12115),r=t(6874),n=t.n(r),i=t(35695),d=t(88304);function c(){let[e,s]=(0,l.useState)(!1),{user:t,userAttributes:r,userGroups:c,signOutUser:o,isInGroup:x}=(0,d.A)(),h=(0,i.useRouter)(),m=async()=>{await o(),h.push("/"),h.refresh()},u=()=>{var e;return(null==r?void 0:r.preferred_username)?r.preferred_username:(null==r?void 0:r.email)?r.email.split("@")[0]:(null==t||null==(e=t.signInDetails)?void 0:e.loginId)?t.signInDetails.loginId.split("@")[0]:(null==t?void 0:t.username)?t.username:"User"};return(0,a.jsxs)("nav",{className:"bg-red-800 shadow-lg sticky top-0 z-50",children:[(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between h-16",children:[(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)(n(),{href:"/",className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-2xl font-bold text-gold",children:"\uD83E\uDD5F"}),(0,a.jsx)("span",{className:"text-xl font-bold text-white",children:"Golden Dragon"}),(0,a.jsx)("span",{className:"text-sm text-gold ml-2",children:"金龙餐厅"})]})}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,a.jsx)(n(),{href:"/",className:"text-white hover:text-gold transition",children:"Home"}),(0,a.jsx)(n(),{href:"/menu",className:"text-white hover:text-gold transition",children:"Menu"}),(0,a.jsx)(n(),{href:"/delivery",className:"text-white hover:text-gold transition",children:"Delivery"}),(0,a.jsx)(n(),{href:"/reservation",className:"text-white hover:text-gold transition",children:"Reservation"}),(0,a.jsx)(n(),{href:"/location",className:"text-white hover:text-gold transition",children:"Location"}),t&&x("restaurantHost")&&(0,a.jsx)(n(),{href:"/admin/host",className:"text-white hover:text-gold transition",children:"Host Dashboard"}),t&&x("maintenance")&&(0,a.jsx)(n(),{href:"/admin/maintenance",className:"text-white hover:text-gold transition",children:"Admin"}),t?(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)("span",{className:"text-gold text-sm font-semibold",children:["\uD83D\uDC64 Welcome, ",u()]}),(0,a.jsx)("button",{onClick:m,className:"bg-gold text-red-900 px-3 py-2 rounded-lg hover:bg-yellow-400 transition font-semibold text-sm",children:"Sign Out"})]}):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(n(),{href:"/signup",className:"text-white hover:text-gold transition font-semibold",children:"Sign Up"}),(0,a.jsx)(n(),{href:"/login",className:"bg-gold text-red-900 px-4 py-2 rounded-lg hover:bg-yellow-400 transition font-semibold",children:"Login"})]})]}),(0,a.jsx)("div",{className:"md:hidden flex items-center",children:(0,a.jsx)("button",{onClick:()=>s(!e),className:"text-white hover:text-gold focus:outline-none",children:(0,a.jsx)("svg",{className:"h-6 w-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,a.jsx)("path",{d:"M6 18L18 6M6 6l12 12"}):(0,a.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),e&&(0,a.jsx)("div",{className:"md:hidden bg-red-700",children:(0,a.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,a.jsx)(n(),{href:"/",className:"block px-3 py-2 text-white hover:text-gold",children:"Home"}),(0,a.jsx)(n(),{href:"/menu",className:"block px-3 py-2 text-white hover:text-gold",children:"Menu"}),(0,a.jsx)(n(),{href:"/delivery",className:"block px-3 py-2 text-white hover:text-gold",children:"Delivery"}),(0,a.jsx)(n(),{href:"/reservation",className:"block px-3 py-2 text-white hover:text-gold",children:"Reservation"}),(0,a.jsx)(n(),{href:"/location",className:"block px-3 py-2 text-white hover:text-gold",children:"Location"}),t&&x("restaurantHost")&&(0,a.jsx)(n(),{href:"/admin/host",className:"block px-3 py-2 text-white hover:text-gold",children:"Host Dashboard"}),t&&x("maintenance")&&(0,a.jsx)(n(),{href:"/admin/maintenance",className:"block px-3 py-2 text-white hover:text-gold",children:"Admin"}),t?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"block px-3 py-2 text-gold text-sm font-semibold",children:["\uD83D\uDC64 Welcome, ",u()]}),(0,a.jsx)("button",{onClick:m,className:"block w-full text-left px-3 py-2 text-white hover:text-gold",children:"Sign Out"})]}):(0,a.jsx)(n(),{href:"/login",className:"block px-3 py-2 text-white hover:text-gold",children:"Login"})]})})]})}},88304:(e,s,t)=>{"use strict";t.d(s,{A:()=>x,default:()=>h});var a=t(95155),l=t(12115),r=t(69414),n=t(52248),i=t(59995),d=t(53732),c=t(29020);let o=(0,l.createContext)({user:null,userAttributes:null,userGroups:[],loading:!0,checkUser:async()=>{},signOutUser:async()=>{},isInGroup:()=>!1}),x=()=>(0,l.useContext)(o);function h(e){let{children:s}=e,[t,x]=(0,l.useState)(null),[h,m]=(0,l.useState)(null),[u,p]=(0,l.useState)([]),[b,j]=(0,l.useState)(!0),g=async()=>{try{let a=await (0,n.H)();x(a);try{let e=await (0,i.T)();m(e)}catch(e){console.log("Could not fetch attributes:",e)}try{var e,s,t;let a=(null==(t=(await (0,d.$)()).tokens)||null==(s=t.accessToken)||null==(e=s.payload)?void 0:e["cognito:groups"])||[];p(a)}catch(e){console.log("Could not fetch user groups:",e),p([])}}catch(e){x(null),m(null),p([])}finally{j(!1)}},v=async()=>{try{await (0,c.C)(),x(null),m(null),p([])}catch(e){console.error("Error signing out:",e)}};return(0,l.useEffect)(()=>(g(),r.YZ.listen("auth",e=>{let{payload:s}=e;switch(s.event){case"signedIn":case"tokenRefresh":g();break;case"signedOut":case"tokenRefresh_failure":x(null),m(null),p([])}})),[]),(0,a.jsx)(o.Provider,{value:{user:t,userAttributes:h,userGroups:u,loading:b,checkUser:g,signOutUser:v,isInGroup:e=>u.includes(e)},children:s})}}},e=>{e.O(0,[218,244,441,964,358],()=>e(e.s=21225)),_N_E=e.O()}]);