"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[124],{39040:(e,t,r)=>{r.d(t,{S:()=>l});var s=r(98232),a=r(76718),i=r(54314);a.E.getConfig().API||a.E.configure(i);let l=(0,s.D)()},54314:e=>{e.exports=JSON.parse('{"auth":{"user_pool_id":"us-east-1_zMPI6Y9Eg","aws_region":"us-east-1","user_pool_client_id":"62ufn5mh2v7m3jf41lavi8t80g","identity_pool_id":"us-east-1:d7385309-e151-456e-a249-0aa6a98bbd7b","mfa_methods":[],"standard_required_attributes":["email"],"username_attributes":["email"],"user_verification_types":["email"],"groups":[{"customer":{"precedence":0}},{"restaurantHost":{"precedence":1}},{"maintenance":{"precedence":2}}],"mfa_configuration":"NONE","password_policy":{"min_length":8,"require_lowercase":true,"require_numbers":true,"require_symbols":true,"require_uppercase":true},"unauthenticated_identities_enabled":true},"data":{"url":"https://qkzhpzqnfffvbcjyftz22ku7ja.appsync-api.us-east-1.amazonaws.com/graphql","aws_region":"us-east-1","api_key":"da2-3djy3i57e5bndgszane7zrc2se","default_authorization_type":"API_KEY","authorization_types":["AMAZON_COGNITO_USER_POOLS","AWS_IAM"],"model_introspection":{"version":1,"models":{"Reservation":{"name":"Reservation","fields":{"id":{"name":"id","isArray":false,"type":"ID","isRequired":true,"attributes":[]},"customerName":{"name":"customerName","isArray":false,"type":"String","isRequired":true,"attributes":[]},"email":{"name":"email","isArray":false,"type":"AWSEmail","isRequired":true,"attributes":[]},"phone":{"name":"phone","isArray":false,"type":"AWSPhone","isRequired":false,"attributes":[]},"date":{"name":"date","isArray":false,"type":"AWSDate","isRequired":true,"attributes":[]},"time":{"name":"time","isArray":false,"type":"String","isRequired":true,"attributes":[]},"numberOfGuests":{"name":"numberOfGuests","isArray":false,"type":"Int","isRequired":true,"attributes":[]},"specialRequests":{"name":"specialRequests","isArray":false,"type":"String","isRequired":false,"attributes":[]},"status":{"name":"status","isArray":false,"type":{"enum":"ReservationStatus"},"isRequired":false,"attributes":[]},"userId":{"name":"userId","isArray":false,"type":"String","isRequired":false,"attributes":[]},"createdAt":{"name":"createdAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[]},"updatedAt":{"name":"updatedAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[]}},"syncable":true,"pluralName":"Reservations","attributes":[{"type":"model","properties":{}},{"type":"key","properties":{"fields":["id"]}},{"type":"auth","properties":{"rules":[{"allow":"public","provider":"apiKey","operations":["create","read"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read"],"groups":["customer"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read","update"],"groups":["restaurantHost"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read","update","delete"],"groups":["maintenance"]},{"provider":"userPools","ownerField":"owner","allow":"owner","operations":["read","update"],"identityClaim":"cognito:username"}]}}],"primaryKeyInfo":{"isCustomPrimaryKey":false,"primaryKeyFieldName":"id","sortKeyFieldNames":[]}},"Order":{"name":"Order","fields":{"id":{"name":"id","isArray":false,"type":"ID","isRequired":true,"attributes":[]},"customerName":{"name":"customerName","isArray":false,"type":"String","isRequired":true,"attributes":[]},"email":{"name":"email","isArray":false,"type":"AWSEmail","isRequired":true,"attributes":[]},"phone":{"name":"phone","isArray":false,"type":"AWSPhone","isRequired":false,"attributes":[]},"deliveryAddress":{"name":"deliveryAddress","isArray":false,"type":"String","isRequired":true,"attributes":[]},"items":{"name":"items","isArray":false,"type":"AWSJSON","isRequired":true,"attributes":[]},"subtotal":{"name":"subtotal","isArray":false,"type":"Float","isRequired":true,"attributes":[]},"tax":{"name":"tax","isArray":false,"type":"Float","isRequired":true,"attributes":[]},"deliveryFee":{"name":"deliveryFee","isArray":false,"type":"Float","isRequired":true,"attributes":[]},"total":{"name":"total","isArray":false,"type":"Float","isRequired":true,"attributes":[]},"status":{"name":"status","isArray":false,"type":{"enum":"OrderStatus"},"isRequired":false,"attributes":[]},"specialInstructions":{"name":"specialInstructions","isArray":false,"type":"String","isRequired":false,"attributes":[]},"userId":{"name":"userId","isArray":false,"type":"String","isRequired":false,"attributes":[]},"createdAt":{"name":"createdAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[]},"updatedAt":{"name":"updatedAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[]}},"syncable":true,"pluralName":"Orders","attributes":[{"type":"model","properties":{}},{"type":"key","properties":{"fields":["id"]}},{"type":"auth","properties":{"rules":[{"allow":"public","provider":"apiKey","operations":["create","read"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read"],"groups":["customer"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["read","update"],"groups":["restaurantHost"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read","update","delete"],"groups":["maintenance"]},{"provider":"userPools","ownerField":"owner","allow":"owner","operations":["read"],"identityClaim":"cognito:username"}]}}],"primaryKeyInfo":{"isCustomPrimaryKey":false,"primaryKeyFieldName":"id","sortKeyFieldNames":[]}},"MenuItem":{"name":"MenuItem","fields":{"id":{"name":"id","isArray":false,"type":"ID","isRequired":true,"attributes":[]},"name":{"name":"name","isArray":false,"type":"String","isRequired":true,"attributes":[]},"nameZh":{"name":"nameZh","isArray":false,"type":"String","isRequired":true,"attributes":[]},"description":{"name":"description","isArray":false,"type":"String","isRequired":false,"attributes":[]},"descriptionZh":{"name":"descriptionZh","isArray":false,"type":"String","isRequired":false,"attributes":[]},"category":{"name":"category","isArray":false,"type":{"enum":"MenuItemCategory"},"isRequired":false,"attributes":[]},"price":{"name":"price","isArray":false,"type":"Float","isRequired":true,"attributes":[]},"imageUrl":{"name":"imageUrl","isArray":false,"type":"AWSURL","isRequired":false,"attributes":[]},"spicyLevel":{"name":"spicyLevel","isArray":false,"type":"Int","isRequired":false,"attributes":[]},"isVegetarian":{"name":"isVegetarian","isArray":false,"type":"Boolean","isRequired":false,"attributes":[]},"isGlutenFree":{"name":"isGlutenFree","isArray":false,"type":"Boolean","isRequired":false,"attributes":[]},"isAvailable":{"name":"isAvailable","isArray":false,"type":"Boolean","isRequired":false,"attributes":[]},"createdAt":{"name":"createdAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[],"isReadOnly":true},"updatedAt":{"name":"updatedAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[],"isReadOnly":true}},"syncable":true,"pluralName":"MenuItems","attributes":[{"type":"model","properties":{}},{"type":"key","properties":{"fields":["id"]}},{"type":"auth","properties":{"rules":[{"allow":"public","provider":"apiKey","operations":["read"]},{"allow":"private","operations":["read"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["read","update"],"groups":["restaurantHost"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read","update","delete"],"groups":["maintenance"]}]}}],"primaryKeyInfo":{"isCustomPrimaryKey":false,"primaryKeyFieldName":"id","sortKeyFieldNames":[]}},"User":{"name":"User","fields":{"id":{"name":"id","isArray":false,"type":"ID","isRequired":true,"attributes":[]},"email":{"name":"email","isArray":false,"type":"AWSEmail","isRequired":true,"attributes":[]},"name":{"name":"name","isArray":false,"type":"String","isRequired":false,"attributes":[]},"phoneNumber":{"name":"phoneNumber","isArray":false,"type":"AWSPhone","isRequired":false,"attributes":[]},"role":{"name":"role","isArray":false,"type":{"enum":"UserRole"},"isRequired":false,"attributes":[]},"memberSince":{"name":"memberSince","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[]},"totalOrders":{"name":"totalOrders","isArray":false,"type":"Int","isRequired":false,"attributes":[]},"totalSpent":{"name":"totalSpent","isArray":false,"type":"Float","isRequired":false,"attributes":[]},"loyaltyPoints":{"name":"loyaltyPoints","isArray":false,"type":"Int","isRequired":false,"attributes":[]},"createdAt":{"name":"createdAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[],"isReadOnly":true},"updatedAt":{"name":"updatedAt","isArray":false,"type":"AWSDateTime","isRequired":false,"attributes":[],"isReadOnly":true}},"syncable":true,"pluralName":"Users","attributes":[{"type":"model","properties":{}},{"type":"key","properties":{"fields":["id"]}},{"type":"auth","properties":{"rules":[{"allow":"public","provider":"apiKey","operations":["create","read"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["read"],"groups":["customer"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["read","update"],"groups":["restaurantHost"]},{"groupClaim":"cognito:groups","provider":"userPools","allow":"groups","operations":["create","read","update","delete"],"groups":["maintenance"]},{"provider":"userPools","ownerField":"owner","allow":"owner","operations":["read","update"],"identityClaim":"cognito:username"}]}}],"primaryKeyInfo":{"isCustomPrimaryKey":false,"primaryKeyFieldName":"id","sortKeyFieldNames":[]}}},"enums":{"ReservationStatus":{"name":"ReservationStatus","values":["pending","confirmed","cancelled"]},"OrderStatus":{"name":"OrderStatus","values":["pending","confirmed","preparing","delivering","delivered","cancelled"]},"MenuItemCategory":{"name":"MenuItemCategory","values":["appetizers","soups","poultry","beef","pork","seafood","vegetarian","rice","noodles","desserts","beverages"]},"UserRole":{"name":"UserRole","values":["customer","restaurantHost","maintenance"]}},"nonModels":{}}},"version":"1.4"}')},82885:(e,t,r)=>{r.d(t,{A:()=>u});var s=r(95155),a=r(12115),i=r(6874),l=r.n(i),o=r(35695),n=r(88304);function u(){let[e,t]=(0,a.useState)(!1),{user:r,userAttributes:i,userGroups:u,signOutUser:d,isInGroup:p}=(0,n.A)(),m=(0,o.useRouter)(),c=async()=>{await d(),m.push("/"),m.refresh()},y=()=>{var e;return(null==i?void 0:i.preferred_username)?i.preferred_username:(null==i?void 0:i.email)?i.email.split("@")[0]:(null==r||null==(e=r.signInDetails)?void 0:e.loginId)?r.signInDetails.loginId.split("@")[0]:(null==r?void 0:r.username)?r.username:"User"};return(0,s.jsxs)("nav",{className:"bg-red-800 shadow-lg sticky top-0 z-50",children:[(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsxs)(l(),{href:"/",className:"flex items-center space-x-2",children:[(0,s.jsx)("span",{className:"text-2xl font-bold text-gold",children:"\uD83E\uDD5F"}),(0,s.jsx)("span",{className:"text-xl font-bold text-white",children:"Golden Dragon"}),(0,s.jsx)("span",{className:"text-sm text-gold ml-2",children:"金龙餐厅"})]})}),(0,s.jsxs)("div",{className:"hidden md:flex items-center space-x-8",children:[(0,s.jsx)(l(),{href:"/",className:"text-white hover:text-gold transition",children:"Home"}),(0,s.jsx)(l(),{href:"/menu",className:"text-white hover:text-gold transition",children:"Menu"}),(0,s.jsx)(l(),{href:"/delivery",className:"text-white hover:text-gold transition",children:"Delivery"}),(0,s.jsx)(l(),{href:"/reservation",className:"text-white hover:text-gold transition",children:"Reservation"}),(0,s.jsx)(l(),{href:"/location",className:"text-white hover:text-gold transition",children:"Location"}),r&&p("restaurantHost")&&(0,s.jsx)(l(),{href:"/admin/host",className:"text-white hover:text-gold transition",children:"Host Dashboard"}),r&&p("maintenance")&&(0,s.jsx)(l(),{href:"/admin/maintenance",className:"text-white hover:text-gold transition",children:"Admin"}),r?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("span",{className:"text-gold text-sm font-semibold",children:["\uD83D\uDC64 Welcome, ",y()]}),(0,s.jsx)("button",{onClick:c,className:"bg-gold text-red-900 px-3 py-2 rounded-lg hover:bg-yellow-400 transition font-semibold text-sm",children:"Sign Out"})]}):(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(l(),{href:"/signup",className:"text-white hover:text-gold transition font-semibold",children:"Sign Up"}),(0,s.jsx)(l(),{href:"/login",className:"bg-gold text-red-900 px-4 py-2 rounded-lg hover:bg-yellow-400 transition font-semibold",children:"Login"})]})]}),(0,s.jsx)("div",{className:"md:hidden flex items-center",children:(0,s.jsx)("button",{onClick:()=>t(!e),className:"text-white hover:text-gold focus:outline-none",children:(0,s.jsx)("svg",{className:"h-6 w-6",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",stroke:"currentColor",children:e?(0,s.jsx)("path",{d:"M6 18L18 6M6 6l12 12"}):(0,s.jsx)("path",{d:"M4 6h16M4 12h16M4 18h16"})})})})]})}),e&&(0,s.jsx)("div",{className:"md:hidden bg-red-700",children:(0,s.jsxs)("div",{className:"px-2 pt-2 pb-3 space-y-1",children:[(0,s.jsx)(l(),{href:"/",className:"block px-3 py-2 text-white hover:text-gold",children:"Home"}),(0,s.jsx)(l(),{href:"/menu",className:"block px-3 py-2 text-white hover:text-gold",children:"Menu"}),(0,s.jsx)(l(),{href:"/delivery",className:"block px-3 py-2 text-white hover:text-gold",children:"Delivery"}),(0,s.jsx)(l(),{href:"/reservation",className:"block px-3 py-2 text-white hover:text-gold",children:"Reservation"}),(0,s.jsx)(l(),{href:"/location",className:"block px-3 py-2 text-white hover:text-gold",children:"Location"}),r&&p("restaurantHost")&&(0,s.jsx)(l(),{href:"/admin/host",className:"block px-3 py-2 text-white hover:text-gold",children:"Host Dashboard"}),r&&p("maintenance")&&(0,s.jsx)(l(),{href:"/admin/maintenance",className:"block px-3 py-2 text-white hover:text-gold",children:"Admin"}),r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"block px-3 py-2 text-gold text-sm font-semibold",children:["\uD83D\uDC64 Welcome, ",y()]}),(0,s.jsx)("button",{onClick:c,className:"block w-full text-left px-3 py-2 text-white hover:text-gold",children:"Sign Out"})]}):(0,s.jsx)(l(),{href:"/login",className:"block px-3 py-2 text-white hover:text-gold",children:"Login"})]})})]})}},88304:(e,t,r)=>{r.d(t,{A:()=>p,default:()=>m});var s=r(95155),a=r(12115),i=r(69414),l=r(52248),o=r(59995),n=r(53732),u=r(29020);let d=(0,a.createContext)({user:null,userAttributes:null,userGroups:[],loading:!0,checkUser:async()=>{},signOutUser:async()=>{},isInGroup:()=>!1}),p=()=>(0,a.useContext)(d);function m(e){let{children:t}=e,[r,p]=(0,a.useState)(null),[m,c]=(0,a.useState)(null),[y,f]=(0,a.useState)([]),[g,h]=(0,a.useState)(!0),x=async()=>{try{let s=await (0,l.H)();p(s);try{let e=await (0,o.T)();c(e)}catch(e){console.log("Could not fetch attributes:",e)}try{var e,t,r;let s=(null==(r=(await (0,n.$)()).tokens)||null==(t=r.accessToken)||null==(e=t.payload)?void 0:e["cognito:groups"])||[];f(s)}catch(e){console.log("Could not fetch user groups:",e),f([])}}catch(e){p(null),c(null),f([])}finally{h(!1)}},b=async()=>{try{await (0,u.C)(),p(null),c(null),f([])}catch(e){console.error("Error signing out:",e)}};return(0,a.useEffect)(()=>(x(),i.YZ.listen("auth",e=>{let{payload:t}=e;switch(t.event){case"signedIn":case"tokenRefresh":x();break;case"signedOut":case"tokenRefresh_failure":p(null),c(null),f([])}})),[]),(0,s.jsx)(d.Provider,{value:{user:r,userAttributes:m,userGroups:y,loading:g,checkUser:x,signOutUser:b,isInGroup:e=>y.includes(e)},children:t})}}}]);